(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{362:function(t,a,s){t.exports=s.p+"assets/img/cache1.d9fcd199.png"},363:function(t,a,s){t.exports=s.p+"assets/img/cache2.c921484e.png"},364:function(t,a,s){t.exports=s.p+"assets/img/cache3.983c8894.png"},365:function(t,a,s){t.exports=s.p+"assets/img/cache4.07f7e28f.png"},366:function(t,a,s){t.exports=s.p+"assets/img/cache5.7effc779.png"},397:function(t,a,s){"use strict";s.r(a);var e=s(44),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"账管缓存刷新方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#账管缓存刷新方法"}},[t._v("#")]),t._v(" 账管缓存刷新方法")]),t._v(" "),e("p",[t._v("根据代码中取缓存的方式不一样，账管有两种刷新缓存的方法。")]),t._v(" "),e("h2",{attrs:{id:"第一种"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第一种"}},[t._v("#")]),t._v(" 第一种：")]),t._v(" "),e("p",[e("img",{attrs:{src:s(362),alt:"cache1"}}),t._v('{width="5.768055555555556in" height="1.3222222222222222in"}')]),t._v(" "),e("p",[t._v("通过ParamMgr类获取缓存：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("更新参数表中的参数（param用户和param_stage用户）")])]),t._v(" "),e("li",[e("p",[t._v("切换到base库，执行更新缓存表时间戳的sql：")])])]),t._v(" "),e("p",[t._v("生产环境：")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--（表名就是table_id，更新哪张表，条件中就带哪张表的表名。不要全量更新，以免刷新失败）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cfg_cache_table t "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_time"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sysdate "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table_id"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BS_SYS_PROFILES'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Stage环境：")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--（表名就是table_id，更新哪张表，条件中就带哪张表的表名。不要全量更新，以免刷新失败）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" base_stage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cfg_cache_table t "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_time"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sysdate "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table_id"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BS_SYS_PROFILES'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("strong",[t._v("生产环境和stage环境的param（param_stage）和base（base_stage）库名是不一样的，切记。")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("登录缓存刷新平台，选怎缓存管理-版本刷新 菜单")])]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"http://172.25.132.100:9090/index.do",target:"_blank",rel:"noopener noreferrer"}},[t._v("[http://172.25.132.100:9090/index.do]{.underline}"),e("OutboundLink")],1),t._v("（生产缓存）")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://172.25.138.11:9090/index.do",target:"_blank",rel:"noopener noreferrer"}},[t._v("[http://172.25.138.11:9090/index.do]{.underline}"),e("OutboundLink")],1),t._v(" （stage缓存）")]),t._v(" "),e("p",[e("img",{attrs:{src:s(363),alt:"cache2"}}),t._v('{width="5.768055555555556in" height="3.01875in"}')])]),t._v(" "),e("p",[t._v("刷新图中的两个缓存即可。")]),t._v(" "),e("h2",{attrs:{id:"第二种"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第二种"}},[t._v("#")]),t._v(" 第二种：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("String strPcrfProdValue = SysProfile.getValue(PARAM_PCRF_PROD_LIST);\n")])])]),e("p",[t._v("通过SysProfile.getValue方法获取缓存。")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("更新BS_SYSPRO_FILE这张表的参数。")])]),t._v(" "),e("li",[e("p",[t._v("登录缓存页面\n"),e("img",{attrs:{src:s(364),alt:"cache3"}}),t._v('{width="5.768055555555556in" height="2.5840277777777776in"}')])])]),t._v(" "),e("p",[t._v("系统名称选择app-acctmanm ，刷新途中选中的缓存。")]),t._v(" "),e("h2",{attrs:{id:"第三种-其他缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三种-其他缓存"}},[t._v("#")]),t._v(" 第三种：其他缓存")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("新增分表，需要刷新分表规则缓存：\n"),e("img",{attrs:{src:s(365),alt:"cache4"}}),t._v('{width="5.768055555555556in" height="2.935416666666667in"}')])]),t._v(" "),e("li",[e("p",[t._v("前台可以查询缓存的接口")])])]),t._v(" "),e("p",[e("strong",[t._v("asset_ICRMServiceCSV_queryAcctCache")]),t._v(" "),e("img",{attrs:{src:s(366),alt:"cache5"}}),t._v('{width="5.768055555555556in" height="1.5590277777777777in"}')])])}),[],!1,null,null,null);a.default=r.exports}}]);