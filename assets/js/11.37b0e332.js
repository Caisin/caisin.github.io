(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{313:function(t,a,s){t.exports=s.p+"assets/img/CMPAKCS.7f0ca6d1.png"},314:function(t,a,s){t.exports=s.p+"assets/img/pjump-login.5042d993.jpg"},406:function(t,a,s){"use strict";s.r(a);var n=s(44),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"production-准生产环境说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#production-准生产环境说明"}},[t._v("#")]),t._v(" Production 准生产环境说明")]),t._v(" "),n("p",[t._v("Production 准生产环境说明地址：http://git.wadecn.com:18082/cmpak/runtime-config-production, 只读账号密码：git/1q1w1e1r")]),t._v(" "),n("h2",{attrs:{id:"访问地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#访问地址"}},[t._v("#")]),t._v(" 访问地址")]),t._v(" "),n("ul",[n("li",[n("h6",{attrs:{id:"crm前台接入地址-域名-https-https-ngcrm-zong-com-pk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#crm前台接入地址-域名-https-https-ngcrm-zong-com-pk"}},[t._v("#")]),t._v(" CRM前台接入地址（域名+HTTPS）：https://ngcrm.zong.com.pk/")])]),t._v(" "),n("li",[n("h6",{attrs:{id:"控制台地址-http-172-25-138-12-9000-cmpk-console"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#控制台地址-http-172-25-138-12-9000-cmpk-console"}},[t._v("#")]),t._v(" 控制台地址 : http://172.25.138.12:9000/cmpk-console/")])]),t._v(" "),n("li",[n("h6",{attrs:{id:"账管et地址-http-172-25-136-13-8880-et-console-login-html-用户密码-asset-asset"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#账管et地址-http-172-25-136-13-8880-et-console-login-html-用户密码-asset-asset"}},[t._v("#")]),t._v(" 账管ET地址 :  http://172.25.136.13:8880/et-console/login.html 用户密码: asset/asset")])]),t._v(" "),n("li",[n("h6",{attrs:{id:"刷缓存地址-http-172-25-132-100-9090-manage-login-redirecturl-index-do"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#刷缓存地址-http-172-25-132-100-9090-manage-login-redirecturl-index-do"}},[t._v("#")]),t._v(" 刷缓存地址 :  http://172.25.132.100:9090/manage/login?redirectUrl=/index.do")])])]),t._v(" "),n("h2",{attrs:{id:"应用部署架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用部署架构"}},[t._v("#")]),t._v(" 应用部署架构")]),t._v(" "),n("p",[n("img",{attrs:{src:s(313),alt:"CMPAK-部署架构-CS"}})]),t._v(" "),n("h2",{attrs:{id:"网络开通列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络开通列表"}},[t._v("#")]),t._v(" 网络开通列表")]),t._v(" "),n("p",[t._v("注意安全！！！注意安全！！！切记！！！切记！！！")]),t._v(" "),n("p",[t._v("注意安全！！！注意安全！！！切记！！！切记！！！")]),t._v(" "),n("p",[t._v("请按格式提交SVN上的表格里，要求说明每条策略是干什么用，从哪个环境到哪个环境，是否影响现网以及如何控制安全风险")]),t._v(" "),n("p",[t._v("svn://172.21.164.205/cmpak/doc/03.网络开通/Application form for Network Rights.xlsx")]),t._v(" "),n("p",[t._v("SVN的账号/密码：svn/svn")]),t._v(" "),n("h2",{attrs:{id:"主机ip及用户列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主机ip及用户列表"}},[t._v("#")]),t._v(" 主机IP及用户列表")]),t._v(" "),n("p",[t._v("所有主机通堡垒机登录，登录方法如下：")]),t._v(" "),n("ul",[n("li",[t._v("ssh aicrm@172.25.132.102, 账号/密码：aicrm/crm#*312")]),t._v(" "),n("li",[t._v("执行 pjump 命令选择要登录的子系统、IP以及账号，操作如下图：")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(314),alt:"CMPAK-部署架构-CS"}})]),t._v(" "),n("h3",{attrs:{id:"主机、用户列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主机、用户列表"}},[t._v("#")]),t._v(" 主机、用户列表")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("业务域")]),t._v(" "),n("th",[t._v("账号说明")]),t._v(" "),n("th",[t._v("账号")]),t._v(" "),n("th",[t._v("IP地址")]),t._v(" "),n("th",[t._v("密码")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("CRM/账管前台界面")]),t._v(" "),n("td",[t._v("aiweb")]),t._v(" "),n("td",[t._v("172.25.132.88"),n("br"),t._v("172.25.132.89"),n("br"),t._v("172.25.132.90"),n("br"),t._v("172.25.132.91"),n("br"),t._v("172.25.132.92"),n("br"),t._v("172.25.132.93")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("静态资源")]),t._v(" "),n("td",[t._v("nginx")]),t._v(" "),n("td",[t._v("172.25.132.86"),n("br"),t._v("172.25.132.87")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("前台软代理")]),t._v(" "),n("td",[t._v("proxy")]),t._v(" "),n("td",[t._v("172.25.132.86"),n("br"),t._v("172.25.132.87")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("账务中心-APP")]),t._v(" "),n("td",[t._v("aiapp")]),t._v(" "),n("td",[t._v("172.25.132.25"),n("br"),t._v("172.25.132.29"),n("br"),t._v("172.25.132.33"),n("br"),t._v("172.25.132.35"),n("br"),t._v("172.25.132.39"),n("br"),t._v("172.25.132.43")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("订单（融合）中心-APP")]),t._v(" "),n("td",[t._v("aiapp")]),t._v(" "),n("td",[t._v("172.25.132.26"),n("br"),t._v("172.25.132.30"),n("br"),t._v("172.25.132.34"),n("br"),t._v("172.25.132.36"),n("br"),t._v("172.25.132.37"),n("br"),t._v("172.25.132.38"),n("br"),t._v("172.25.132.40"),n("br"),t._v("172.25.132.41"),n("br"),t._v("172.25.132.42"),n("br"),t._v("172.25.132.44"),n("br"),t._v("172.25.132.45"),n("br"),t._v("172.25.132.46")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("账管后台进程(物理机)")]),t._v(" "),n("td",[t._v("aifet")]),t._v(" "),n("td",[t._v("172.25.136.13"),n("br"),t._v("172.25.136.14"),n("br"),t._v("172.25.136.15"),n("br"),t._v("172.25.136.16")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("CRM/ACT")]),t._v(" "),n("td",[t._v("报表进程(物理机)")]),t._v(" "),n("td",[t._v("dwh"),n("br"),t._v("report")]),t._v(" "),n("td",[t._v("172.25.136.11"),n("br"),t._v("172.25.136.12")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("本地缓存(物理机)")]),t._v(" "),n("td",[t._v("aicache")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("注册中心")]),t._v(" "),n("td",[t._v("zk")]),t._v(" "),n("td",[t._v("172.25.132.94"),n("br"),t._v("172.25.132.95"),n("br"),t._v("172.25.132.96"),n("br"),t._v("172.25.132.97"),n("br"),t._v("172.25.132.98")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("消息队列（导入导出业务）")]),t._v(" "),n("td",[t._v("kafka")]),t._v(" "),n("td",[t._v("172.25.132.79"),n("br"),t._v("172.25.132.80"),n("br"),t._v("172.25.132.81")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("FTP & FTP 服务网关(物理机)")]),t._v(" "),n("td",[t._v("gw"),n("br"),t._v("upload")]),t._v(" "),n("td",[t._v("172.25.136.25"),n("br"),t._v("172.25.136.26")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("ELK(物理机)")]),t._v(" "),n("td",[t._v("elk")]),t._v(" "),n("td",[t._v("172.25.136.39"),n("br"),t._v("172.25.136.40"),n("br"),t._v("172.25.136.49"),n("br"),t._v("172.25.136.50"),n("br"),t._v("172.25.136.51")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("环境部署(主)"),n("br"),t._v("环境部署(备)")]),t._v(" "),n("td",[t._v("sa"),n("br"),t._v("sa")]),t._v(" "),n("td",[t._v("172.25.132.100"),n("br"),t._v("172.25.132.101")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("编译发布(主)"),n("br"),t._v("编译发布(备)")]),t._v(" "),n("td",[t._v("aideploy"),n("br"),t._v("aideploy")]),t._v(" "),n("td",[t._v("172.25.132.100"),n("br"),t._v("172.25.132.101")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("DNS(Master)"),n("br"),t._v("DNS(slave)")]),t._v(" "),n("td",[t._v("named"),n("br"),t._v("named")]),t._v(" "),n("td",[t._v("172.25.136.25"),n("br"),t._v("172.25.136.26")]),t._v(" "),n("td",[t._v("xxxxxxxx")])]),t._v(" "),n("tr",[n("td",[t._v("公共组件")]),t._v(" "),n("td",[t._v("监控")]),t._v(" "),n("td",[t._v("monitor")]),t._v(" "),n("td",[t._v("172.25.132.102"),n("br"),t._v("172.25.132.103")]),t._v(" "),n("td",[t._v("xxxxxxxx")])])])]),t._v(" "),n("h2",{attrs:{id:"数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),n("p",[t._v("生产环境 与 Stage 共用一套数据库，数据库需要通过域名访问，PC机在DNS服务没有提供前，我们需要通过本地的hosts解析域名。")]),t._v(" "),n("p",[t._v("DNS的命名规则为数据库主机名+.zong，请按新的命名调整")]),t._v(" "),n("p",[t._v("所有数据库的跨用户只读账号：readonly/readonly")]),t._v(" "),n("h3",{attrs:{id:"数据库域名-windows-c-etc-hosts-文件添加如下配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库域名-windows-c-etc-hosts-文件添加如下配置"}},[t._v("#")]),t._v(" 数据库域名（Windows c:/etc/hosts 文件添加如下配置）")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("172.25.137.13    cs.rpt.dbl.zong    # CRPT1_TAF\n172.25.137.14    cs.rpt.dbs.zong    # CRPT2_TAF\n172.25.137.18    cs.sfp1.dbl.zong   # CSFP11_TAF\n172.25.137.19    cs.sfp1.dbs.zong   # CSFP12_TAF\n172.25.137.23    cs.sfp2.dbl.zong   # CSFP21_TAF\n172.25.137.24    cs.sfp2.dbs.zong   # CSFP22_TAF\n172.25.137.28    cs.sfp3.dbl.zong   # CSFP31_TAF\n172.25.137.29    cs.sfp3.dbs.zong   # CSFP32_TAF\n172.25.137.33    cs.sfp4.dbl.zong   # CSFP41_TAF\n172.25.137.34    cs.sfp4.dbs.zong   # CSFP42_TAF\n172.25.137.38    cs.act1.dbl.zong   # CACT11_TAF\n172.25.137.39    cs.act1.dbs.zong   # CACT12_TAF\n172.25.137.43    cs.act2.dbl.zong   # CACT21_TAF\n172.25.137.44    cs.act2.dbs.zong   # CACT22_TAF\n172.25.137.48    cs.act3.dbl.zong   # CACT31_TAF\n172.25.137.49    cs.act3.dbs.zong   # CACT32_TAF\n172.25.137.53    cs.act4.dbl.zong   # CACT41_TAF\n172.25.137.54    cs.act4.dbs.zong   # CACT42_TAF\n172.25.137.58    cs.osp.dbl.zong    # COSP1_TAF\n172.25.137.59    cs.osp.dbs.zong    # COSP2_TAF\n172.25.137.63    cs.crm1.dbl.zong   # CCRM11_TAF\n172.25.137.64    cs.crm1.dbs.zong   # CCRM12_TAF\n172.25.137.68    cs.crm2.dbl.zong   # CCRM21_TAF\n172.25.137.69    cs.crm2.dbs.zong   # CCRM22_TAF\n172.25.137.73    cs.crm3.dbl.zong   # CCRM31_TAF\n172.25.137.74    cs.crm3.dbs.zong   # CCRM32_TAF\n172.25.137.78    cs.crm4.dbl.zong   # CCRM41_TAF\n172.25.137.79    cs.crm4.dbs.zong   # CCRM42_TAF\n172.25.137.83    cs.chn.dbl.zong    # CCHN1_TAF\n172.25.137.84    cs.chn.dbs.zong    # CCHN2_TAF\n")])])]),n("h3",{attrs:{id:"数据库用户规划"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库用户规划"}},[t._v("#")]),t._v(" 数据库用户规划")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("数据库")]),t._v(" "),n("th",[t._v("用户名")]),t._v(" "),n("th",[t._v("用户说明")]),t._v(" "),n("th",[t._v("TNS名称")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("OCS")]),t._v(" "),n("td",[t._v("jd"),n("br"),t._v("pd"),n("br"),t._v("sd"),n("br"),t._v("ad")]),t._v(" "),n("td",[t._v("OCS压测环境")]),t._v(" "),n("td",[t._v("NGCRM_BBASE1")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC1"),n("br"),t._v("CEN")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（0，699）"),n("br"),t._v("账务中心配置")]),t._v(" "),n("td",[t._v("CACT11_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC2")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（700，2099）")]),t._v(" "),n("td",[t._v("CACT12_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC3"),n("br"),t._v("PARAM")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（2100，2999）"),n("br"),t._v("账务参数配置")]),t._v(" "),n("td",[t._v("CACT21_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC4")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（3000，4399）")]),t._v(" "),n("td",[t._v("CACT22_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC5")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（4400，5799）")]),t._v(" "),n("td",[t._v("CACT31_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC6")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（5800，7199）")]),t._v(" "),n("td",[t._v("CACT32_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC7")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（7200，8599）")]),t._v(" "),n("td",[t._v("CACT41_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("ACT")]),t._v(" "),n("td",[t._v("AC8")]),t._v(" "),n("td",[t._v("账库ID/用户ID按1000取模后（8600，9999）")]),t._v(" "),n("td",[t._v("CACT42_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("RPT")]),t._v(" "),n("td",[t._v("STAT")]),t._v(" "),n("td",[t._v("统计前台")]),t._v(" "),n("td",[t._v("CRTP1_TAF")])]),t._v(" "),n("tr",[n("td",[t._v("RPT")]),t._v(" "),n("td",[t._v("STAT")]),t._v(" "),n("td",[t._v("统计后台")]),t._v(" "),n("td",[t._v("CRTP2_TAF")])])])]),t._v(" "),n("h3",{attrs:{id:"tns-jdbc-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tns-jdbc-配置"}},[t._v("#")]),t._v(" TNS & JDBC 配置")]),t._v(" "),n("p",[t._v("NGCRM_BBASE1")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=172.25.143.33)(port=1521))(address=(protocol=tcp)(host=172.25.143.34)(port=1521)))(connect_data=(service_name=testocs)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT11_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = 172.25.143.33)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = 172.25.143.34)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = testocs)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT11_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act1.dbl.zong)(port=1521))(address=(protocol=tcp)(host=cs.act1.dbs.zong)(port=1521)))(connect_data=(service_name=cact1)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT11_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act1.dbl.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act1.dbs.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact1)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT12_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act1.dbs.zong)(port=1521))(address=(protocol=tcp)(host=cs.act1.dbl.zong)(port=1521)))(connect_data=(service_name=cact1)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT12_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act1.dbs.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act1.dbl.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact1)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT21_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act2.dbl.zong)(port=1521))(address=(protocol=tcp)(host=cs.act2.dbs.zong)(port=1521)))(connect_data=(service_name=cact2)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT21_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act2.dbl.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act2.dbs.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact2)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT22_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act2.dbs.zong)(port=1521))(address=(protocol=tcp)(host=cs.act2.dbl.zong)(port=1521)))(connect_data=(service_name=cact2)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT22_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act2.dbs.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act2.dbl.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact2)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT31_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act3.dbl.zong)(port=1521))(address=(protocol=tcp)(host=cs.act3.dbs.zong)(port=1521)))(connect_data=(service_name=cact3)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT31_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act3.dbl.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act3.dbs.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact3)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT32_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act3.dbs.zong)(port=1521))(address=(protocol=tcp)(host=cs.act3.dbl.zong)(port=1521)))(connect_data=(service_name=cact3)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT32_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act3.dbs.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act3.dbl.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact3)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT41_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act4.dbl.zong)(port=1521))(address=(protocol=tcp)(host=cs.act4.dbs.zong)(port=1521)))(connect_data=(service_name=cact4)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT41_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act4.dbl.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act4.dbs.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact4)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("p",[t._v("CACT42_TAF")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host=cs.act4.dbs.zong)(port=1521))(address=(protocol=tcp)(host=cs.act4.dbl.zong)(port=1521)))(connect_data=(service_name=cact4)(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("CACT42_TAF =\n (DESCRIPTION=\n   (ADDRESS_LIST=\n     (LOAD_BALANCE = off)\n     (FAILOVER = on)\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act4.dbs.zong)(PORT = 1521))\n     (ADDRESS = (PROTOCOL = TCP)(HOST = cs.act4.dbl.zong)(PORT = 1521))\n   )\n   (CONNECT_DATA=\n     (SERVICE_NAME = cact4)\n     (FAILOVER_MODE = (TYPE = session)(METHOD = basic)(RETRIES = 180)(DELAY = 5))\n   )\n )\n")])])]),n("h3",{attrs:{id:"数据源统一密码管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据源统一密码管理"}},[t._v("#")]),t._v(" 数据源统一密码管理")]),t._v(" "),n("p",[t._v("所有基于 appframe 开发的进程都需要纳入统一密码管理，主要配置文件在 default.xml，主要的配置表在 base 用户下的四张表")]),t._v(" "),n("ul",[n("li",[t._v("数据源及账号配置表：CFG_DB_ACCT")]),t._v(" "),n("li",[t._v("数据库URL配置表：CFG_DB_URL")]),t._v(" "),n("li",[t._v("进程、数据源、URL关联关系表：CFG_DB_RELAT")]),t._v(" "),n("li",[t._v("数据源扩展参数配置表（给v$session.program设值）：CFG_DB_JDBC_PARAMETER")])]),t._v(" "),n("h4",{attrs:{id:"defaults-xml-配置说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#defaults-xml-配置说明"}},[t._v("#")]),t._v(" defaults.xml 配置说明")]),t._v(" "),n("p",[t._v('defaults.xml 走统一密码管理时，必须指定prefetch信息、有且仅有一个主数据源信息用来访问数据源配置表，且每个pool必须指定isAdvanceUrl="true", 示例配置内容如下：')]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 统一数据源管理 --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("clazz")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.ai.appframe2.complex.datasource.impl.LocalMutilDataSourceImpl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tableName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cfg_db_acct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("urlTableName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cfg_db_url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("relatTableName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cfg_db_relat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.driverClassName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("oracle.jdbc.OracleDriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jdbc:oracle:thin:@//172.21.164.219:1521/crmtest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.username"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("BASE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{RC2}NOrfhj5TC0I="),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.initialSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.maxActive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch.maxIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("clazz")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 主数据源= --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("pool")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("BASE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("primary")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("isAdvanceUrl")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("initialSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("maxActive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("30"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("maxIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("maxWait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--连接泄漏检查,180秒后回收物理数据库连接到数据库中--\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("removeAbandoned"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("removeAbandonedTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("180"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("logAbandoned"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--连接池有效性检查--\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("validationQuery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("select 1 from dual"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("validationQueryTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("60000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("testWhileIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("testOnBorrow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("testOnReturn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--最多20秒检查到连接失效--\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("timeBetweenEvictionRunsMillis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("20000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("minEvictableIdleTimeMillis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("3600000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("softMinEvictableIdleTimeMillis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("3600000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("numTestsPerEvictionRun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("20"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("oracle.net.ldap_loadbalance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("OFF"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("connectionProperties"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("oracle.net.ldap_loadbalance=OFF;oracle.net.ldap_failover=ON"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("oracle.net.ldap_failover"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ON"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("pool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"配置数据源常用sql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置数据源常用sql"}},[t._v("#")]),t._v(" 配置数据源常用SQL")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 生成RAC串 CFG_DB_URL")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jdbc:oracle:thin:@(description=(address_list=(load_balance=off)(failover=on)(address=(protocol=tcp)(host='")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("REMARKS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("REMARKS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'|'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')(port=1521))(address=(protocol=tcp)(host='")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("REMARKS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("REMARKS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'|'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')(port=1521)))(connect_data=(service_name='")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" lower"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')(failover_mode=(type=select)(method=basic)(RETRIES=180)(DELAY=5))))'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" N_URL "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" CFG_DB_URL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 查看进程名配置的数据源")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" CFG_DB_RELAT r"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cfg_db_acct a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CFG_DB_URL u\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" r"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL_NAME"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("u"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NAME\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" r"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DB_ACCT_CODE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DB_ACCT_CODE\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" r"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("STATE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'U'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("STATE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'U'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" u"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("STATE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'U'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--and a.DB_ACCT_CODE='sfframe1' -- 数据源名称")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" r"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SERVER_NAME"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-node01-srv04'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 进程名")]),t._v("\n")])])]),n("h4",{attrs:{id:"批量生成app数据源配置sql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#批量生成app数据源配置sql"}},[t._v("#")]),t._v(" 批量生成app数据源配置SQL")]),t._v(" "),n("p",[t._v("crm的app拆中心部署后，每个app主机提供的服务和需要访问的数据库都会严格按业务中心分配，并且每个业务中心的app还将提供两个集群，一个给 web 前台，一个给 osp 接口，为了 DBA 能快速识别 v$session 里每个进程的信息，需要将 app 的进程名以及归属中心、归属集群、监控地址都写到数据源参数表。")]),t._v(" "),n("p",[t._v("数据源账号表（CFG_DB_ACCT）和数据源URL表（CFG_DB_URL）比较单一，手动修改配置即可，针对进程和数据源关联表（CFG_DB_RELAT）和数据源参数表（CFG_DB_JDBC_PARAMETER）提供批量生成的脚本，脚本说明如下：")]),t._v(" "),n("ul",[n("li",[t._v("脚本目录：deploy@172.25.132.100:/home/aideploy/bin/app/")]),t._v(" "),n("li",[t._v("配置脚本：data.py, 用来配置进程归属集群（web | osp）、进程归属业务中心、进程需要配置的数据源、数据源对应的URL名称")]),t._v(" "),n("li",[t._v("生成脚本：./create-datasource.py > datasource.sql")])]),t._v(" "),n("p",[t._v("生成的 SQL 示例如下：")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" CFG_DB_RELAT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DB_ACCT_CODE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" URL_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SERVER_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" STATE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" REMARKS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BASE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CCRM12_TAF'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-node11-srv01'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'U'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" CFG_DB_JDBC_PARAMETER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PARAMETER_ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("DB_ACCT_CODE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("SERVER_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("STATE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("REMARKS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CFG_DB_JDBC_PARAMETER$SEQ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextval"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BASE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-node11-srv01'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connectionProperties'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'v$session.program=base_web_app-node11-srv01|10001'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'U'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"修改数据库密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改数据库密码"}},[t._v("#")]),t._v(" 修改数据库密码")]),t._v(" "),n("p",[t._v("针对所有走统一密码管理的进程，可通过如下步骤修改密码")]),t._v(" "),n("ul",[n("li",[n("ol",[n("li",[t._v("加密数据库密码，批量加密脚本在 aideploy@100 的 ~/console/passwdmgr，将明文密码放在 passwdmgr.properties 里，执行脚本后会生成对应的密文；")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[t._v("将加密文密码更新到 base.CFG_DB_ACCT.PASSWORD表；")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"3"}},[n("li",[t._v("更新相应的进程，进程列表见下表；")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"4"}},[n("li",[t._v("重启相应的进程，进程列表见下表；")])])])]),t._v(" "),n("h5",{attrs:{id:"数据源进程关系表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据源进程关系表"}},[t._v("#")]),t._v(" 数据源进程关系表")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("进程名")]),t._v(" "),n("th",[t._v("说明")]),t._v(" "),n("th",[t._v("数据源名称")]),t._v(" "),n("th",[t._v("配置文件路径")]),t._v(" "),n("th",[t._v("更新脚本")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("app-load-csf")]),t._v(" "),n("td",[t._v("服务注册入库")]),t._v(" "),n("td",[t._v("BASE"),n("br"),t._v("CSF")]),t._v(" "),n("td",[t._v("runtime-config/app/load")]),t._v(" "),n("td",[t._v("aideploy 统一编译")])]),t._v(" "),n("tr",[n("td",[t._v("search-server")]),t._v(" "),n("td",[t._v("搜索服务")]),t._v(" "),n("td",[t._v("BASE"),n("br"),t._v("UPC"),n("br"),t._v("SEC")]),t._v(" "),n("td",[t._v("runtime-config/app/search")]),t._v(" "),n("td",[t._v("aideploy"),n("br"),t._v("cd ~/bin/search"),n("br"),t._v("./update-config-all.sh")])]),t._v(" "),n("tr",[n("td",[t._v("app-nodeXX-srvYY")]),t._v(" "),n("td",[t._v("CRM后台服务")]),t._v(" "),n("td",[t._v("BASE"),n("br"),t._v("UPC"),n("br"),t._v("SEC")]),t._v(" "),n("td",[t._v("runtime-config/app/search")]),t._v(" "),n("td",[t._v("aideploy"),n("br"),t._v("cd ~/bin/search"),n("br"),t._v("./update-config-all.sh")])])])]),t._v(" "),n("h2",{attrs:{id:"应用更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用更新"}},[t._v("#")]),t._v(" 应用更新")]),t._v(" "),n("p",[t._v("生产环境应用更新切换到增量模式，生产环境统一按tag号更新，tag号由测试环境代码合并且编译成功时自动生成，测试环境编译说明请参看：http://git.wadecn.com:18082/cmpak/runtime-config-test#更新发布")]),t._v(" "),n("h3",{attrs:{id:"crm-的-app-web-更新步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#crm-的-app-web-更新步骤"}},[t._v("#")]),t._v(" CRM 的 app,web 更新步骤")]),t._v(" "),n("p",[t._v("请依次执行")]),t._v(" "),n("ul",[n("li",[t._v("更新源码：./checkout-source.py  --args 参数说明:\n"),n("ul",[n("li",[t._v('将"test-build-PKT20191016211600"的tag版本合并到master分支，并提交到版本库：'),n("code",[t._v("./checkout-source.py --merge=test-build-PKT20191016211600 --push=true")])]),t._v(" "),n("li",[t._v('将"mergelist.txt"里的增量更新分支合并到master分支，并提交到版本库：'),n("code",[t._v("./checkout-source.py --merge=mergelist.txt --push=true")])]),t._v(" "),n("li",[t._v("同步master分支的全部最新代码和配置："),n("code",[t._v("./checkout-source.py --all")])]),t._v(" "),n("li",[t._v("同步生产环境运行时配置："),n("code",[t._v("./checkout-source.py --runtime-config")])]),t._v(" "),n("li",[t._v("同步master分支最新依赖包："),n("code",[t._v("./checkout-source.py --library")])])])]),t._v(" "),n("li",[t._v("全量编译：./build-all.py")]),t._v(" "),n("li",[t._v("注册服务信息 & 生成服务 API文档：./load-service.py")]),t._v(" "),n("li",[t._v("发布 AICache：./deploy-aicache.py")]),t._v(" "),n("li",[t._v("全量并发发布 app：./deploy-app-parallel-all.py   #发布时会影响上游感知，速度比较快，可能会导致数据库TNS风暴（频繁创建数据库连接）")]),t._v(" "),n("li",[t._v("全量灰度发布 app：./deploy-app-parallel-gray.py  #日常更新使用，4个并发，按主机更新，对上游无感知，速度比较慢")]),t._v(" "),n("li",[t._v("全量并发发布 web：./deploy-web-all-gray.py       #日常更新使用，24个并发，按进程更新，对上游无感知")]),t._v(" "),n("li",[t._v('服务批量同步：当新增或修改服务时需要操作该步骤，否则新服务会调不到，详细操作见下文的 "服务批量上下线"')])]),t._v(" "),n("h3",{attrs:{id:"crm-的-app-服务管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#crm-的-app-服务管理"}},[t._v("#")]),t._v(" CRM 的 app 服务管理")]),t._v(" "),n("h4",{attrs:{id:"服务批量上下线"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务批量上下线"}},[t._v("#")]),t._v(" 服务批量上下线")]),t._v(" "),n("ul",[n("li",[t._v("登录csf控制台：http://172.25.132.100:18080/csf-console/csf/index.html，账号/密码：csf/123456，登录后会有报错提示，请忽略")]),t._v(" "),n("li",[t._v('依次打开 "服务管理" -> "服务上下线" 菜单，点击 "全局批量同步" 按钮，需要稍等会会有提示是否同步成功')])]),t._v(" "),n("h3",{attrs:{id:"crm-的-app-缓存刷新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#crm-的-app-缓存刷新"}},[t._v("#")]),t._v(" CRM 的 app 缓存刷新")]),t._v(" "),n("p",[t._v("本次所有JVM的本地缓存都基于 aicache 实现，并通过平台统一刷新和管理，管理平台地址：http://172.25.132.100:9090/manage/login?redirectUrl=/index.do，账号/密码：admin/admin")]),t._v(" "),n("h4",{attrs:{id:"业务自定义本地缓存刷新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#业务自定义本地缓存刷新"}},[t._v("#")]),t._v(" 业务自定义本地缓存刷新")]),t._v(" "),n("ul",[n("li",[t._v('登录平台后依次打开 "静态缓存管理" -> "版本刷新" 菜单，"系统名称"的下拉里选择业务中心，查询后找到对应的缓存ID，点击刷新')]),t._v(" "),n("li",[t._v("在表格的最下面可查看刷新日志")])]),t._v(" "),n("h4",{attrs:{id:"sql结果集缓存刷新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sql结果集缓存刷新"}},[t._v("#")]),t._v(" SQL结果集缓存刷新")]),t._v(" "),n("p",[t._v("SQL结果集刷新是指基于 RSExpressDAO 并指定 .sql 为 IS_CACHE=Y 的查询结果集，包括com.asiainfo.areca.staticparam.StaticUtil的如下API：")]),t._v(" "),n("ul",[n("li",[t._v("getStaticList*")]),t._v(" "),n("li",[t._v("getStaticData*")]),t._v(" "),n("li",[t._v("getParaDetails*")])]),t._v(" "),n("p",[t._v("刷新步骤")]),t._v(" "),n("ul",[n("li",[t._v("修改版本号：base.CACHE_TABLES.VERSION")]),t._v(" "),n("li",[t._v("在版本刷新的菜单的系统名称选择: app-base")]),t._v(" "),n("li",[t._v("刷新缓存ID：com.asiainfo.areca.express.rse.cache.CacheTableCacheImpl")])]),t._v(" "),n("h4",{attrs:{id:"指定表名的静态参数缓存刷新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指定表名的静态参数缓存刷新"}},[t._v("#")]),t._v(" 指定表名的静态参数缓存刷新")]),t._v(" "),n("p",[t._v("开发经常需要通过指定参数类表名通过缓存查询数据，框架提供统一的API，要以指定某个数据源下某个表的数据查询，并通过缓存提升性能，框架提供的API在com.asiainfo.areca.staticparam.StaticUtil的如下方法里：")]),t._v(" "),n("ul",[n("li",[t._v("getList*")]),t._v(" "),n("li",[t._v("getMap*")]),t._v(" "),n("li",[t._v("getValue*")])]),t._v(" "),n("p",[t._v("刷新步骤")]),t._v(" "),n("ul",[n("li",[t._v("修改版本号：base.CFG_CACHE_TABLE.CREATE_TIME")]),t._v(" "),n("li",[t._v("在版本刷新的菜单的系统名称选择: app-base")]),t._v(" "),n("li",[t._v("刷新缓存ID：com.asiainfo.areca.soa.bsparam.repository.dao.staticparam.CfgCacheTableImpl")])]),t._v(" "),n("h2",{attrs:{id:"应用部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用部署"}},[t._v("#")]),t._v(" 应用部署")]),t._v(" "),n("h3",{attrs:{id:"应用物理拆中心部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用物理拆中心部署"}},[t._v("#")]),t._v(" 应用物理拆中心部署")]),t._v(" "),n("h4",{attrs:{id:"前台web分中心部署规划"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前台web分中心部署规划"}},[t._v("#")]),t._v(" 前台web分中心部署规划")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("应用名称")]),t._v(" "),n("th",[t._v("模块编码")]),t._v(" "),n("th",[t._v("IP地址")]),t._v(" "),n("th",[t._v("监听端口")]),t._v(" "),n("th",[t._v("探测地址")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("前台代理")]),t._v(" "),n("td",[t._v("proxy")]),t._v(" "),n("td",[t._v("172.25.132.86")]),t._v(" "),n("td",[t._v("8080")]),t._v(" "),n("td",[t._v("/")])]),t._v(" "),n("tr",[n("td",[t._v("登录门户")]),t._v(" "),n("td",[t._v("portal")]),t._v(" "),n("td",[t._v("172.25.132.88"),n("br"),t._v("172.25.132.89"),n("br"),t._v("172.25.132.90"),n("br"),t._v("172.25.132.91"),n("br"),t._v("172.25.132.92"),n("br"),t._v("172.25.132.93")]),t._v(" "),n("td",[t._v("8011")]),t._v(" "),n("td",[t._v("/probe")])]),t._v(" "),n("tr",[n("td",[t._v("统计中心")]),t._v(" "),n("td",[t._v("stat")]),t._v(" "),n("td",[t._v("172.25.132.88"),n("br"),t._v("172.25.132.89"),n("br"),t._v("172.25.132.90"),n("br"),t._v("172.25.132.91"),n("br"),t._v("172.25.132.92"),n("br"),t._v("172.25.132.93")]),t._v(" "),n("td",[t._v("8081")]),t._v(" "),n("td",[t._v("/web-stat/probe")])]),t._v(" "),n("tr",[n("td",[t._v("账管中心")]),t._v(" "),n("td",[t._v("acctmanm")]),t._v(" "),n("td",[t._v("172.25.132.88"),n("br"),t._v("172.25.132.89"),n("br"),t._v("172.25.132.90"),n("br"),t._v("172.25.132.91"),n("br"),t._v("172.25.132.92"),n("br"),t._v("172.25.132.93")]),t._v(" "),n("td",[t._v("8091,8092")]),t._v(" "),n("td",[t._v("/web-acctmanm/probe")])])])]),t._v(" "),n("h4",{attrs:{id:"后台app分中心分集群部署规划"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#后台app分中心分集群部署规划"}},[t._v("#")]),t._v(" 后台app分中心分集群部署规划")]),t._v(" "),n("p",[t._v("根据最终讨论的结果，约定如下：")]),t._v(" "),n("ul",[n("li",[t._v("每个app主机唯一归属在一个业务中心，每个业务中心内的进程必须跨物理机跨机柜部署；")]),t._v(" "),n("li",[t._v("每个app主机部署9个进程，前3个进程（10001~10003）提供给 web 调用，后6个进程（10004~10009）提供给osp调用；")]),t._v(" "),n("li",[t._v("app一共拆成8个业务中心，按业务中心物理拆分部署，其中订单中心为融合中心，可以访问所有的库，其它中心仅访问自己的库；")]),t._v(" "),n("li",[t._v("跨中心带事务的服务需要各业务中心梳理，确定无法修改的服务，将服务名添加前缀 soa.xxx，这类服务将路由到融合中心里，修改的同时，要通知能开或调用方同步修改服务名；")]),t._v(" "),n("li",[t._v("osp和web需要在客户端指定JVM参数 -Dcsf.client.name 才能路由到正确的集群；")])]),t._v(" "),n("h5",{attrs:{id:"提供给web调用的app集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#提供给web调用的app集群"}},[t._v("#")]),t._v(" 提供给web调用的app集群")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("中心名称")]),t._v(" "),n("th",[t._v("集群名称")]),t._v(" "),n("th",[t._v("提供的服务")]),t._v(" "),n("th",[t._v("csf客户端")]),t._v(" "),n("th",[t._v("APP进程名")]),t._v(" "),n("th",[t._v("监听地址")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("acctmanm")]),t._v(" "),n("td",[t._v("app-acctmanm-web")]),t._v(" "),n("td",[t._v("bill"),n("br"),t._v("score"),n("br"),t._v("acomp"),n("br"),t._v("invoice"),n("br"),t._v("asset")]),t._v(" "),n("td",[t._v("web-node*")]),t._v(" "),n("td",[t._v("app-node25-srv01~03"),n("br"),t._v("app-node29-srv01~03"),n("br"),t._v("app-node33-srv01~03"),n("br"),t._v("app-node35-srv01~03"),n("br"),t._v("app-node39-srv01~03"),n("br"),t._v("app-node43-srv01~03")]),t._v(" "),n("td",[t._v("172.25.132.25:10001~10003"),n("br"),t._v("172.25.132.29:10001~10003"),n("br"),t._v("172.25.132.33:10001~10003"),n("br"),t._v("172.25.132.33:10001~10003"),n("br"),t._v("172.25.132.35:10001~10003"),n("br"),t._v("172.25.132.39:10001~10003"),n("br"),t._v("172.25.132.43:10001~10003")])]),t._v(" "),n("tr",[n("td",[t._v("order")]),t._v(" "),n("td",[t._v("app-order-web")]),t._v(" "),n("td",[t._v("order"),n("br"),t._v("soa"),n("br"),t._v("*")]),t._v(" "),n("td",[t._v("web-node*")]),t._v(" "),n("td",[t._v("app-node26-srv01~03"),n("br"),t._v("app-node30-srv01~03"),n("br"),t._v("app-node34-srv01~03"),n("br"),t._v("app-node36-srv01~03"),n("br"),t._v("app-node37-srv01~03"),n("br"),t._v("app-node38-srv01~03"),n("br"),t._v("app-node40-srv01~03"),n("br"),t._v("app-node41-srv01~03"),n("br"),t._v("app-node42-srv01~03"),n("br"),t._v("app-node44-srv01~03"),n("br"),t._v("app-node45-srv01~03"),n("br"),t._v("app-node46-srv01~03")]),t._v(" "),n("td",[t._v("172.25.132.26:10001~10003"),n("br"),t._v("172.25.132.30:10001~10003"),n("br"),t._v("172.25.132.34:10001~10003"),n("br"),t._v("172.25.132.36:10001~10003"),n("br"),t._v("172.25.132.37:10001~10003"),n("br"),t._v("172.25.132.38:10001~10003"),n("br"),t._v("172.25.132.40:10001~10003"),n("br"),t._v("172.25.132.41:10001~10003"),n("br"),t._v("172.25.132.42:10001~10003"),n("br"),t._v("172.25.132.44:10001~10003"),n("br"),t._v("172.25.132.45:10001~10003"),n("br"),t._v("172.25.132.46:10001~10003")])])])]),t._v(" "),n("h5",{attrs:{id:"提供给能开调用的app集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#提供给能开调用的app集群"}},[t._v("#")]),t._v(" 提供给能开调用的app集群")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("中心名称")]),t._v(" "),n("th",[t._v("集群名称")]),t._v(" "),n("th",[t._v("提供的服务")]),t._v(" "),n("th",[t._v("csf客户端")]),t._v(" "),n("th",[t._v("APP进程名")]),t._v(" "),n("th",[t._v("监听地址")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("acctmanm")]),t._v(" "),n("td",[t._v("app-acctmanm-osp")]),t._v(" "),n("td",[t._v("bill"),n("br"),t._v("score"),n("br"),t._v("acomp"),n("br"),t._v("invoice"),n("br"),t._v("asset")]),t._v(" "),n("td",[t._v("app-osp")]),t._v(" "),n("td",[t._v("app-node25-srv04~09"),n("br"),t._v("app-node29-srv04~09"),n("br"),t._v("app-node33-srv04~09"),n("br"),t._v("app-node35-srv04~09"),n("br"),t._v("app-node39-srv04~09"),n("br"),t._v("app-node43-srv04~09")]),t._v(" "),n("td",[t._v("172.25.132.25:10004~10009"),n("br"),t._v("172.25.132.29:10004~10009"),n("br"),t._v("172.25.132.33:10004~10009"),n("br"),t._v("172.25.132.33:10004~10009"),n("br"),t._v("172.25.132.35:10004~10009"),n("br"),t._v("172.25.132.39:10004~10009"),n("br"),t._v("172.25.132.43:10004~10009")])]),t._v(" "),n("tr",[n("td",[t._v("order")]),t._v(" "),n("td",[t._v("app-order-osp")]),t._v(" "),n("td",[t._v("order"),n("br"),t._v("soa"),n("br"),t._v("*")]),t._v(" "),n("td",[t._v("app-osp")]),t._v(" "),n("td",[t._v("app-node26-srv04~09"),n("br"),t._v("app-node30-srv04~09"),n("br"),t._v("app-node34-srv04~09"),n("br"),t._v("app-node36-srv04~09"),n("br"),t._v("app-node37-srv04~09"),n("br"),t._v("app-node38-srv04~09"),n("br"),t._v("app-node40-srv04~09"),n("br"),t._v("app-node41-srv04~09"),n("br"),t._v("app-node42-srv04~09"),n("br"),t._v("app-node44-srv04~09"),n("br"),t._v("app-node45-srv04~09"),n("br"),t._v("app-node46-srv04~09")]),t._v(" "),n("td",[t._v("172.25.132.26:10004~10009"),n("br"),t._v("172.25.132.30:10004~10009"),n("br"),t._v("172.25.132.34:10004~10009"),n("br"),t._v("172.25.132.36:10004~10009"),n("br"),t._v("172.25.132.37:10004~10009"),n("br"),t._v("172.25.132.38:10004~10009"),n("br"),t._v("172.25.132.40:10004~10009"),n("br"),t._v("172.25.132.41:10004~10009"),n("br"),t._v("172.25.132.42:10004~10009"),n("br"),t._v("172.25.132.44:10004~10009"),n("br"),t._v("172.25.132.45:10004~10009"),n("br"),t._v("172.25.132.46:10004~10009")])])])]),t._v(" "),n("h5",{attrs:{id:"提供给服开调用的app集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#提供给服开调用的app集群"}},[t._v("#")]),t._v(" 提供给服开调用的app集群")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("中心名称")]),t._v(" "),n("th",[t._v("集群名称")]),t._v(" "),n("th",[t._v("提供的服务")]),t._v(" "),n("th",[t._v("csf客户端")]),t._v(" "),n("th",[t._v("APP进程名")]),t._v(" "),n("th",[t._v("监听地址")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("acctmanm")]),t._v(" "),n("td",[t._v("app-acctmanm-sfp")]),t._v(" "),n("td",[t._v("bill"),n("br"),t._v("score"),n("br"),t._v("acomp"),n("br"),t._v("invoice"),n("br"),t._v("asset")]),t._v(" "),n("td",[t._v("app-sfp")]),t._v(" "),n("td",[t._v("app-node25-srv04~09"),n("br"),t._v("app-node29-srv04~09"),n("br"),t._v("app-node33-srv04~09"),n("br"),t._v("app-node35-srv04~09"),n("br"),t._v("app-node39-srv04~09"),n("br"),t._v("app-node43-srv04~09")]),t._v(" "),n("td",[t._v("172.25.132.25:10004~10009"),n("br"),t._v("172.25.132.29:10004~10009"),n("br"),t._v("172.25.132.33:10004~10009"),n("br"),t._v("172.25.132.33:10004~10009"),n("br"),t._v("172.25.132.35:10004~10009"),n("br"),t._v("172.25.132.39:10004~10009"),n("br"),t._v("172.25.132.43:10004~10009")])]),t._v(" "),n("tr",[n("td",[t._v("order")]),t._v(" "),n("td",[t._v("app-order-sfp")]),t._v(" "),n("td",[t._v("order"),n("br"),t._v("soa"),n("br"),t._v("*")]),t._v(" "),n("td",[t._v("app-sfp")]),t._v(" "),n("td",[t._v("app-node26-srv04~09"),n("br"),t._v("app-node30-srv04~09"),n("br"),t._v("app-node34-srv04~09"),n("br"),t._v("app-node36-srv04~09"),n("br"),t._v("app-node37-srv04~09"),n("br"),t._v("app-node38-srv04~09"),n("br"),t._v("app-node40-srv04~09"),n("br"),t._v("app-node41-srv04~09"),n("br"),t._v("app-node42-srv04~09"),n("br"),t._v("app-node44-srv04~09"),n("br"),t._v("app-node45-srv04~09"),n("br"),t._v("app-node46-srv04~09")]),t._v(" "),n("td",[t._v("172.25.132.26:10004~10009"),n("br"),t._v("172.25.132.30:10004~10009"),n("br"),t._v("172.25.132.34:10004~10009"),n("br"),t._v("172.25.132.36:10004~10009"),n("br"),t._v("172.25.132.37:10004~10009"),n("br"),t._v("172.25.132.38:10004~10009"),n("br"),t._v("172.25.132.40:10004~10009"),n("br"),t._v("172.25.132.41:10004~10009"),n("br"),t._v("172.25.132.42:10004~10009"),n("br"),t._v("172.25.132.44:10004~10009"),n("br"),t._v("172.25.132.45:10004~10009"),n("br"),t._v("172.25.132.46:10004~10009")])])])]),t._v(" "),n("h4",{attrs:{id:"中台应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#中台应用"}},[t._v("#")]),t._v(" 中台应用")]),t._v(" "),n("ul",[n("li",[t._v("注册中心ZK地址：172.25.132.94:2181,172.25.132.95:2181,172.25.132.96:2181,172.25.132.97:2181,172.25.132.98:2181")]),t._v(" "),n("li",[t._v("分布式搜索地址：172.25.138.23:11000,172.25.138.24:11000")]),t._v(" "),n("li",[t._v("静态资源地址：172.25.138.12:9000,172.25.138.13:9000")]),t._v(" "),n("li",[t._v("FTP网关地址(gw)：172.25.138.28:14001")]),t._v(" "),n("li",[t._v("消息队列(kafka)：172.25.132.79:9092,172.25.132.80:9092,172.25.132.81:9092")]),t._v(" "),n("li",[t._v("单点登录：172.25.138.12:8000,172.25.138.13:8000")])]),t._v(" "),n("h5",{attrs:{id:"search-服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#search-服务"}},[t._v("#")]),t._v(" Search 服务")]),t._v(" "),n("p",[t._v("Search 是用来解决 SQL like 的业务场景，比如菜单搜索，商品搜索等。它是基于文件索引，通过数据库配置的 SQL 语句，提前将查询结果写入内存，能大大减少数据库的压力。")]),t._v(" "),n("p",[t._v("Search 针对不同的业务提供独立的服务名，即搜索编码，搜索编码、数据源名称、查询 SQL的关系在如下三个表里定义：")]),t._v(" "),n("ul",[n("li",[t._v("搜索编码、数据源及 SQL 语句配置表：WD_SEARCH_CFG，注意索引目录、备份目录、临时目录要分开；")]),t._v(" "),n("li",[t._v("需要建索引的字段：WD_SEARCH_FIELDS，注意不要把不必要的字段也做索引，写文件，浪费空间和内存；")])]),t._v(" "),n("h5",{attrs:{id:"redis-集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-集群"}},[t._v("#")]),t._v(" Redis 集群")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("集群名称")]),t._v(" "),n("th",[t._v("集群说明")]),t._v(" "),n("th",[t._v("IP地址")]),t._v(" "),n("th",[t._v("端口")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("sec")]),t._v(" "),n("td",[t._v("权限缓存")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("12001,12002")])]),t._v(" "),n("tr",[n("td",[t._v("sna")]),t._v(" "),n("td",[t._v("会话缓存")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("13001,13002")])]),t._v(" "),n("tr",[n("td",[t._v("sms")]),t._v(" "),n("td",[t._v("短信缓存")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("14001,14002")])]),t._v(" "),n("tr",[n("td",[t._v("aicache")]),t._v(" "),n("td",[t._v("本地缓存")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("15001,15002")])]),t._v(" "),n("tr",[n("td",[t._v("irsc")]),t._v(" "),n("td",[t._v("零库存缓存")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("16001,16002")])]),t._v(" "),n("tr",[n("td",[t._v("drm")]),t._v(" "),n("td",[t._v("报表缓存")]),t._v(" "),n("td",[t._v("172.25.136.27"),n("br"),t._v("172.25.136.28"),n("br"),t._v("172.25.136.29"),n("br"),t._v("172.25.136.30")]),t._v(" "),n("td",[t._v("17001,17002")])])])]),t._v(" "),n("h5",{attrs:{id:"memcache-集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#memcache-集群"}},[t._v("#")]),t._v(" Memcache 集群")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("集群名称")]),t._v(" "),n("th",[t._v("业务中心")]),t._v(" "),n("th",[t._v("IP地址")]),t._v(" "),n("th",[t._v("端口")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("rse")]),t._v(" "),n("td",[t._v("SQL结果集缓存")]),t._v(" "),n("td",[t._v("172.25.136.35"),n("br"),t._v("172.25.136.36"),n("br"),t._v("172.25.136.37"),n("br"),t._v("172.25.136.38")]),t._v(" "),n("td",[t._v("11201,11211")])]),t._v(" "),n("tr",[n("td",[t._v("bcc")]),t._v(" "),n("td",[t._v("业务并发缓存（全局锁）")]),t._v(" "),n("td",[t._v("172.25.136.35"),n("br"),t._v("172.25.136.36"),n("br"),t._v("172.25.136.37"),n("br"),t._v("172.25.136.38")]),t._v(" "),n("td",[t._v("11201,11212")])])])]),t._v(" "),n("h2",{attrs:{id:"管理控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#管理控制台"}},[t._v("#")]),t._v(" 管理控制台")]),t._v(" "),n("p",[t._v("本次涉及的技术组件非常多，不同的组件都有各自的运维管理界面，管理控制台用来将这些界面的入口集成。")]),t._v(" "),n("p",[t._v("控制台访问地址：http://172.25.138.12:9000/cmpk-console/")]),t._v(" "),n("p",[t._v("控制台版本管理：http://172.21.164.205:3000/git/console.git, 账号：git/git")]),t._v(" "),n("p",[t._v("控制台更新步骤：（所有脚本都在 aideploy@172.25.138.11:/home/aideploy/bin/deploy 目录）")]),t._v(" "),n("ul",[n("li",[t._v("更新代码：./checkout-console.py")]),t._v(" "),n("li",[t._v("发布应用：./deploy-console.py")])]),t._v(" "),n("h3",{attrs:{id:"本地缓存控制台-aicache"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地缓存控制台-aicache"}},[t._v("#")]),t._v(" 本地缓存控制台(aicache)")]),t._v(" "),n("p",[t._v("用来刷新app的cache.xml里定义的本地缓存")]),t._v(" "),n("ul",[n("li",[t._v("前台地址：http://172.25.132.100:9090")]),t._v(" "),n("li",[t._v("登录账号：admin/admin")])]),t._v(" "),n("h3",{attrs:{id:"zkweb控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zkweb控制台"}},[t._v("#")]),t._v(" ZKWEB控制台")]),t._v(" "),n("p",[t._v("用来查看zk信息")]),t._v(" "),n("ul",[n("li",[t._v("前台地址：http://172.25.132.100:9345")]),t._v(" "),n("li",[t._v("登录账号：无")])]),t._v(" "),n("h3",{attrs:{id:"csf服务管理平台-aicsf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#csf服务管理平台-aicsf"}},[t._v("#")]),t._v(" CSF服务管理平台(aicsf)")]),t._v(" "),n("p",[t._v("用来管理和查看服务信息")]),t._v(" "),n("ul",[n("li",[t._v("前台地址：http://172.25.132.100:18080/csf-console/csf/index.html")]),t._v(" "),n("li",[t._v("登录账号：csf/123456")])]),t._v(" "),n("h3",{attrs:{id:"elk控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#elk控制台"}},[t._v("#")]),t._v(" ELK控制台*")]),t._v(" "),n("p",[t._v("用来监控主机信息、服务性能日志、业务运行日志")]),t._v(" "),n("ul",[n("li",[t._v("Kibana：http://172.25.136.49:5601")]),t._v(" "),n("li",[t._v("ES：172.25.136.49:9200,172.25.136.50:9200,172.25.136.51:9200")])]),t._v(" "),n("h4",{attrs:{id:"logstash-规划"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#logstash-规划"}},[t._v("#")]),t._v(" Logstash 规划")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("日志类型")]),t._v(" "),n("th",[t._v("进程名")]),t._v(" "),n("th",[t._v("索引名称")]),t._v(" "),n("th",[t._v("监听IP")]),t._v(" "),n("th",[t._v("监听端口")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("crm能开业务日志")]),t._v(" "),n("td",[t._v("ai-crm-osp-error")]),t._v(" "),n("td",[t._v("filebeat")]),t._v(" "),n("td",[t._v("172.25.136.40")]),t._v(" "),n("td",[t._v("5044")])]),t._v(" "),n("tr",[n("td",[t._v("crm核心服务业务日志")]),t._v(" "),n("td",[t._v("ai-crm-app-error")]),t._v(" "),n("td",[t._v("filebeat")]),t._v(" "),n("td",[t._v("172.25.136.49")]),t._v(" "),n("td",[t._v("5044")])]),t._v(" "),n("tr",[n("td",[t._v("crm后台进程业务日志")]),t._v(" "),n("td",[t._v("ai-crm-et-error")]),t._v(" "),n("td",[t._v("filebeat")]),t._v(" "),n("td",[t._v("172.25.136.50")]),t._v(" "),n("td",[t._v("5044")])]),t._v(" "),n("tr",[n("td",[t._v("crm前台界面业务日志")]),t._v(" "),n("td",[t._v("ai-crm-web-error")]),t._v(" "),n("td",[t._v("filebeat")]),t._v(" "),n("td",[t._v("172.25.136.51")]),t._v(" "),n("td",[t._v("5044")])]),t._v(" "),n("tr",[n("td",[t._v("crm核心服务性能日志")]),t._v(" "),n("td",[t._v("topic-crm-message-perf")]),t._v(" "),n("td",[t._v("topic-crm-message-perf")]),t._v(" "),n("td",[t._v("172.25.136.49")]),t._v(" "),n("td",[t._v("5043")])]),t._v(" "),n("tr",[n("td",[t._v("crm异步业务日志")]),t._v(" "),n("td",[t._v("topic-crm-message-busi")]),t._v(" "),n("td",[t._v("topic-crm-message-busi")]),t._v(" "),n("td",[t._v("172.25.136.50")]),t._v(" "),n("td",[t._v("5043")])]),t._v(" "),n("tr",[n("td",[t._v("crm前台界面性能日志*")]),t._v(" "),n("td",[t._v("ai-crm-web-perf")]),t._v(" "),n("td",[t._v("filebeat")]),t._v(" "),n("td",[t._v("172.25.136.51")]),t._v(" "),n("td",[t._v("5043")])])])]),t._v(" "),n("h3",{attrs:{id:"sftp服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sftp服务"}},[t._v("#")]),t._v(" SFTP服务")]),t._v(" "),n("p",[t._v("文件上传下载，按FRS的要求，统一使用SFTP方式，SFTP服务部署在 172.25.132.25(主)/172.25.132.26(备)，程序统一使用域名访问 "),n("code",[t._v("ftp.zong.com.pk")])]),t._v(" "),n("ul",[n("li",[t._v("sftp 172.25.132.25, 账号密码：upload/######")])]),t._v(" "),n("h3",{attrs:{id:"dns服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dns服务"}},[t._v("#")]),t._v(" DNS服务")]),t._v(" "),n("p",[t._v("生产环境F5 DNS服务器地址：172.25.140.254")]),t._v(" "),n("h2",{attrs:{id:"压力测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#压力测试"}},[t._v("#")]),t._v(" 压力测试")]),t._v(" "),n("h3",{attrs:{id:"jmeter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jmeter"}},[t._v("#")]),t._v(" jmeter")]),t._v(" "),n("p",[t._v("用来模拟发起接口调用，压力机环境如下：")]),t._v(" "),n("ul",[n("li",[t._v("主机：172.25.132.99，ssh账号/密码：jmeter/1q1w1e1r，16c，64G")]),t._v(" "),n("li",[t._v("JAVA环境：~/support/jdk, java8")]),t._v(" "),n("li",[t._v("jmeter环境：~/support/apache-jmeter-3.1")])]),t._v(" "),n("h3",{attrs:{id:"jprofiler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jprofiler"}},[t._v("#")]),t._v(" jprofiler")]),t._v(" "),n("p",[t._v("通过 jprofiler 可以远程监控指定的 jvm，并跟踪该进程上的调用链，方便定位问题，本次服务器上安装的jprofiler都是11")]),t._v(" "),n("h4",{attrs:{id:"账务中心远程jprofiler环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#账务中心远程jprofiler环境"}},[t._v("#")]),t._v(" 账务中心远程jprofiler环境")]),t._v(" "),n("ul",[n("li",[t._v("app 主机信息 172.25.132.25, 账号/密码：aiapp/1q1w1e1r")]),t._v(" "),n("li",[t._v("jprofiler安装路径：/home/aiapp/support/jprofiler")]),t._v(" "),n("li",[t._v("前台调用的APP：启动脚本在~/sbin的jp-start-01.sh，监听18848端口，日志在 ~/logs/app-node25-srv01*.log")]),t._v(" "),n("li",[t._v("能开调用的APP：启动脚本在~/sbin的jp-start-04.sh，监听18849端口，日志在 ~/logs/app-node25-srv04*.log")]),t._v(" "),n("li",[t._v("服开调用的APP：启动脚本在~/sbin的jp-start-04.sh，监听18849端口，日志在 ~/logs/app-node25-srv04*.log")])]),t._v(" "),n("h4",{attrs:{id:"订单中心远程jprofiler环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#订单中心远程jprofiler环境"}},[t._v("#")]),t._v(" 订单中心远程jprofiler环境")]),t._v(" "),n("ul",[n("li",[t._v("app 主机信息 172.25.132.26, 账号/密码：aiapp/1q1w1e1r")]),t._v(" "),n("li",[t._v("jprofiler安装路径：/home/aiapp/support/jprofiler")]),t._v(" "),n("li",[t._v("前台调用的APP：启动脚本在~/sbin的jp-start-01.sh，监听18848端口，日志在 ~/logs/app-node26-srv01*.log")]),t._v(" "),n("li",[t._v("能开调用的APP：启动脚本在~/sbin的jp-start-04.sh，监听18849端口，日志在 ~/logs/app-node26-srv04*.log")]),t._v(" "),n("li",[t._v("服开调用的APP：启动脚本在~/sbin的jp-start-04.sh，监听18849端口，日志在 ~/logs/app-node26-srv04*.log")])]),t._v(" "),n("h4",{attrs:{id:"jprofiler-mac-版序列号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jprofiler-mac-版序列号"}},[t._v("#")]),t._v(" jprofiler mac 版序列号")]),t._v(" "),n("ul",[n("li",[t._v("L-J11-Everyone#speedzodiac-327a9wrs5dxvz#463a59")]),t._v(" "),n("li",[t._v("A-J11-Everyone#admin-3v7hg353d6idd5#9b4")])])])}),[],!1,null,null,null);a.default=r.exports}}]);