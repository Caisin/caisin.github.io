(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{311:function(e,t,a){e.exports=a.p+"assets/img/DBM.52a22f3b.png"},312:function(e,t,a){e.exports=a.p+"assets/img/ReverseParamConfig.6fbe7f82.png"},382:function(e,t,a){"use strict";a.r(t);var s=a(44),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"writeoff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#writeoff"}},[e._v("#")]),e._v(" Writeoff")]),e._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#step1-pull-s-file"}},[e._v("step1 Pull S file")])]),s("li",[s("a",{attrs:{href:"#step2-s-file-audit"}},[e._v("step2 S file audit")])]),s("li",[s("a",{attrs:{href:"#step3-s-file-storage"}},[e._v("step3 S file storage")])]),s("li",[s("a",{attrs:{href:"#setp4-generate-arrears-table-ledger-and-0-payment-ticket"}},[e._v("setp4 Generate arrears table / ledger and 0 payment ticket")]),s("ul",[s("li",[s("a",{attrs:{href:"#business-restrictions"}},[e._v("Business restrictions:")])])])]),s("li",[s("a",{attrs:{href:"#step5-modify-the-status-of-the-account-period"}},[e._v("step5 Modify the status of the account period")])]),s("li",[s("a",{attrs:{href:"#step6-during-customer-inspection"}},[e._v("step6 During customer inspection")]),s("ul",[s("li",[s("a",{attrs:{href:"#business-restrictions"}},[e._v("Business restrictions:")])])])]),s("li",[s("a",{attrs:{href:"#step5-processing-of-0-payment-work-order-completed-at-the-beginning-of-month"}},[e._v("step5 Processing of 0 payment work order completed at the beginning of month")]),s("ul",[s("li",[s("a",{attrs:{href:"#business-restrictions"}},[e._v("Business restrictions:")])])])]),s("li",[s("a",{attrs:{href:"#fallback-mechanism"}},[e._v("Fallback mechanism")]),s("ul",[s("li",[s("a",{attrs:{href:"#back-before-5"}},[e._v("Back before 5")])]),s("li",[s("a",{attrs:{href:"#rollback-after-5th"}},[e._v("Rollback after 5th")])])])]),s("li",[s("a",{attrs:{href:"#background-script-address"}},[e._v("Background script address")])])])]),s("p"),e._v(" "),s("p",[e._v("FlowDiagram")]),e._v(" "),s("p",[s("img",{attrs:{src:a(311),alt:"image-20191230122926078"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v(" Enter the number one, the account period will automatically switch to the 20 state\n S file waiting for billing to generate bills\n")])])]),s("h2",{attrs:{id:"step1-pull-s-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step1-pull-s-file"}},[e._v("#")]),e._v(" step1 Pull S file")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v(" Pull the s file generated by billing to the account management host\n")])])]),s("h2",{attrs:{id:"step2-s-file-audit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step2-s-file-audit"}},[e._v("#")]),e._v(" step2 S file audit")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("The statistical data of the total.log file given by billing is compared with that of the S file. If the amount and the number of records match, the verification is successful.\n")])])]),s("h2",{attrs:{id:"step3-s-file-storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step3-s-file-storage"}},[e._v("#")]),e._v(" step3 S file storage")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("Generated by S\nam_bill_ar_yyyymm\nam_bill_item\n")])])]),s("h2",{attrs:{id:"setp4-generate-arrears-table-ledger-and-0-payment-ticket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setp4-generate-arrears-table-ledger-and-0-payment-ticket"}},[e._v("#")]),e._v(" setp4 Generate arrears table / ledger and 0 payment ticket")]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("--am_acct_debt_mm generated by sql sum")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("--am_balance_mm")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("insert")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("into")]),e._v(" am_balance_11 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("select")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" am_balance_10 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("where")]),e._v(" trade_date"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'20191101000000'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h3",{attrs:{id:"business-restrictions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#business-restrictions"}},[e._v("#")]),e._v(" Business restrictions:")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("~~ Cancel order ~~")]),e._v(" "),s("blockquote",[s("p",[e._v("Ledgers are moving and cannot be cancelled")])])]),e._v(" "),s("li",[s("p",[e._v("Payment")]),e._v(" "),s("blockquote",[s("p",[e._v("The account will be entered in the am_balance table of the previous month and the current month, only the account will be entered, no account will be written off, and no work order will be inserted")])])]),e._v(" "),s("li",[s("p",[e._v("Transfer")])]),e._v(" "),s("li",[s("p",[e._v("Reconciliation")]),e._v(" "),s("blockquote",[s("p",[e._v("Reconciliation of bills generated during the month is not allowed")])])]),e._v(" "),s("li",[s("p",[e._v("~~ Pre-stored and cleared ~~")]),e._v(" "),s("blockquote",[s("p",[e._v("账本在搬迁,不能清退")])])])]),e._v(" "),s("h2",{attrs:{id:"step5-modify-the-status-of-the-account-period"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step5-modify-the-status-of-the-account-period"}},[e._v("#")]),e._v(" step5 Modify the status of the account period")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("The bill and arrears files are stored in the warehouse and am_cycle table status is changed to 3\n")])])]),s("h2",{attrs:{id:"step6-during-customer-inspection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step6-during-customer-inspection"}},[e._v("#")]),e._v(" step6 During customer inspection")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("The customer checked the bill for errors, and the check period was changed to 2\nThe status is successfully modified, and the zero payment work order is started at the beginning of the month.\n")])])]),s("h3",{attrs:{id:"business-restrictions-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#business-restrictions-2"}},[e._v("#")]),e._v(" Business restrictions:")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Pay a fee")]),e._v(" "),s("blockquote",[s("p",[e._v("Pay synchronously to determine whether there are unprocessed work orders, if there are work orders, insert the work orders, otherwise write off directly")])])]),e._v(" "),s("li",[s("p",[e._v("Cancel order")]),e._v(" "),s("blockquote",[s("p",[e._v("3 status, there is no work order cancellation")])])]),e._v(" "),s("li",[s("p",[e._v("Transfer")]),e._v(" "),s("blockquote",[s("p",[e._v("Can transfer, but there are work orders that do not allow transfer")])])]),e._v(" "),s("li",[s("p",[e._v("~~ reconciliation ~~ ???")])]),e._v(" "),s("li",[s("p",[e._v("Pre-stored and retired")]),e._v(" "),s("blockquote",[s("p",[e._v("Work orders are not allowed to clear")])])])]),e._v(" "),s("h2",{attrs:{id:"step5-processing-of-0-payment-work-order-completed-at-the-beginning-of-month"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step5-processing-of-0-payment-work-order-completed-at-the-beginning-of-month"}},[e._v("#")]),e._v(" step5 Processing of 0 payment work order completed at the beginning of month")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v(" Change the accounting period status to 4\n")])])]),s("h3",{attrs:{id:"business-restrictions-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#business-restrictions-3"}},[e._v("#")]),e._v(" Business restrictions:")]),e._v(" "),s("p",[e._v("20 status: check real-time bills for two months")]),e._v(" "),s("p",[e._v("Status change time: Automatically cut at the beginning of the month 20")]),e._v(" "),s("p",[e._v("not support:")]),e._v(" "),s("p",[e._v("Ledger, transfer, cancellation, clearing, cancellation")]),e._v(" "),s("p",[e._v("stand by:")]),e._v(" "),s("p",[e._v("Pay")]),e._v(" "),s("p",[e._v("3 Status: Check real-time bills for one month only")]),e._v(" "),s("p",[e._v("Status change time: Completed cut of bill")]),e._v(" "),s("p",[e._v("not support:")]),e._v(" "),s("p",[e._v("Reconcile monthly bills and write off")]),e._v(" "),s("p",[e._v("Semi-supported")]),e._v(" "),s("p",[e._v("Transfer (there is a cancellation work order, no transfer is allowed)")]),e._v(" "),s("p",[e._v("stand by:")]),e._v(" "),s("p",[e._v("Payment of fees, transfer to monthly bills, transfer of books, cancellation of bills, clearing (whether or not clearing will be done after the 5th)")]),e._v(" "),s("p",[e._v("In the above two states, 4106 work orders are generated, 20 books are entered for two months, and 3 accounts are entered for one month.")]),e._v(" "),s("p",[e._v("Current month's inventory statement cannot be adjusted")]),e._v(" "),s("p",[e._v("2 status: Payment can be written off, but it is necessary to determine whether there is a zero payment work order of 4106. There is no direct write-off, and there is no write-off.")]),e._v(" "),s("p",[e._v("Status change time: The customer check is completed, and it will be switched off when the 4106 cancellation is started.")]),e._v(" "),s("p",[e._v("Current status <= 2")]),e._v(" "),s("p",[e._v("not support:")]),e._v(" "),s("p",[e._v("Semi-supported")]),e._v(" "),s("p",[e._v("Transfer (existing work order, no transfer allowed)")]),e._v(" "),s("p",[e._v("stand by:")]),e._v(" "),s("p",[e._v("Payment, bill adjustment, account book adjustment, cancellation, clearing (whether the clearing will be done after 5th), write-off")]),e._v(" "),s("p",[e._v("1 Status: The 4106 cancellation work order is over, and the account is directly written off.It is not determined whether there is a 4106 work order")]),e._v(" "),s("p",[e._v("Status change time: 4106 end of write-off work order")]),e._v(" "),s("p",[e._v("Unlimited")]),e._v(" "),s("h2",{attrs:{id:"fallback-mechanism"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fallback-mechanism"}},[e._v("#")]),e._v(" Fallback mechanism")]),e._v(" "),s("h3",{attrs:{id:"back-before-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#back-before-5"}},[e._v("#")]),e._v(" Back before 5")]),e._v(" "),s("h4",{attrs:{id:"partial-cancellation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#partial-cancellation"}},[e._v("#")]),e._v(" Partial cancellation")]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('--1. Configure the account that needs to be cancelled. Multiple accounts can be configured. Comma ","')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("select")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" BS_SYS_PROFILES "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("where")]),e._v(" PROFILE_TYPE "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'PPY_TARGET_ACCT_IDS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("--2. Start the WriteOffReverseTask of et")]),e._v("\n")])])]),s("h4",{attrs:{id:"full-fallback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#full-fallback"}},[e._v("#")]),e._v(" Full fallback")]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("--Remove the parameter configuration of some cancellation orders")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("delete")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" BS_SYS_PROFILES "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("where")]),e._v(" PROFILE_TYPE "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'PPY_TARGET_ACCT_IDS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("--2. Start the WriteOffReverseTask of et")]),e._v("\n")])])]),s("h4",{attrs:{id:"falling-back-to-a-center"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#falling-back-to-a-center"}},[e._v("#")]),e._v(" Falling back to a center")]),e._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#etConfiguration Adding startup parameters")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("TARGET_CENTERS")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[e._v("1,2,3,4,5,6,7,8")]),e._v("\n")])])]),s("p",[s("img",{attrs:{src:a(312),alt:"image-ReverseParamConfig"}})]),e._v(" "),s("h3",{attrs:{id:"rollback-after-5th"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rollback-after-5th"}},[e._v("#")]),e._v(" Rollback after 5th")]),e._v(" "),s("h4",{attrs:{id:"single-cancellation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#single-cancellation"}},[e._v("#")]),e._v(" Single cancellation")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("According to the flow of 0 payment, the payment rebate page cancels the order\nDelete the wrong account statement\n")])])]),s("h4",{attrs:{id:"batch-cancellation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#batch-cancellation"}},[e._v("#")]),e._v(" Batch cancellation")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("Export the flow of 4106 in batches, and cancel orders through batch resell work orders\nDelete the storage bill, and re-stock through the new S file\n")])])]),s("h2",{attrs:{id:"background-script-address"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#background-script-address"}},[e._v("#")]),e._v(" Background script address")]),e._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//git.wadecn.com:18084/hekx/assetprocess-script.git\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);