<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BackOffice Design Document | CMPAK Account Management Document</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="CMPAK Account Management Document">
    
    <link rel="preload" href="/acct-doc/assets/css/0.styles.51d143cd.css" as="style"><link rel="preload" href="/acct-doc/assets/js/app.63ad57cc.js" as="script"><link rel="preload" href="/acct-doc/assets/js/2.33beb707.js" as="script"><link rel="preload" href="/acct-doc/assets/js/21.b3600cfd.js" as="script"><link rel="prefetch" href="/acct-doc/assets/js/10.3a0026ee.js"><link rel="prefetch" href="/acct-doc/assets/js/11.37b0e332.js"><link rel="prefetch" href="/acct-doc/assets/js/12.aeeb4d1b.js"><link rel="prefetch" href="/acct-doc/assets/js/13.ac323191.js"><link rel="prefetch" href="/acct-doc/assets/js/14.bd2cb70d.js"><link rel="prefetch" href="/acct-doc/assets/js/15.e224db95.js"><link rel="prefetch" href="/acct-doc/assets/js/16.1706826f.js"><link rel="prefetch" href="/acct-doc/assets/js/17.d60e9805.js"><link rel="prefetch" href="/acct-doc/assets/js/18.b7a13350.js"><link rel="prefetch" href="/acct-doc/assets/js/19.cf8e7b1d.js"><link rel="prefetch" href="/acct-doc/assets/js/20.105e9797.js"><link rel="prefetch" href="/acct-doc/assets/js/22.fc9c31d9.js"><link rel="prefetch" href="/acct-doc/assets/js/23.63486421.js"><link rel="prefetch" href="/acct-doc/assets/js/24.206d6f32.js"><link rel="prefetch" href="/acct-doc/assets/js/25.fcfed3db.js"><link rel="prefetch" href="/acct-doc/assets/js/26.9c2a70ba.js"><link rel="prefetch" href="/acct-doc/assets/js/27.a56776c7.js"><link rel="prefetch" href="/acct-doc/assets/js/28.f3ad07db.js"><link rel="prefetch" href="/acct-doc/assets/js/29.b5b0f0f5.js"><link rel="prefetch" href="/acct-doc/assets/js/3.e252b8df.js"><link rel="prefetch" href="/acct-doc/assets/js/30.3b82be60.js"><link rel="prefetch" href="/acct-doc/assets/js/31.7cfde945.js"><link rel="prefetch" href="/acct-doc/assets/js/32.b0420cfa.js"><link rel="prefetch" href="/acct-doc/assets/js/33.9208bbca.js"><link rel="prefetch" href="/acct-doc/assets/js/34.1ef2f7cc.js"><link rel="prefetch" href="/acct-doc/assets/js/35.f00cf5a4.js"><link rel="prefetch" href="/acct-doc/assets/js/36.c8d22bd6.js"><link rel="prefetch" href="/acct-doc/assets/js/37.a8d4eb5f.js"><link rel="prefetch" href="/acct-doc/assets/js/4.6f4dd1f9.js"><link rel="prefetch" href="/acct-doc/assets/js/5.1dee15cb.js"><link rel="prefetch" href="/acct-doc/assets/js/6.6d4ac80a.js"><link rel="prefetch" href="/acct-doc/assets/js/7.e14e4b70.js"><link rel="prefetch" href="/acct-doc/assets/js/8.36259b9a.js"><link rel="prefetch" href="/acct-doc/assets/js/9.bbaf23c7.js">
    <link rel="stylesheet" href="/acct-doc/assets/css/0.styles.51d143cd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/acct-doc/en/" class="home-link router-link-active"><!----> <span class="site-name">CMPAK Account Management Document</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/acct-doc/en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/acct-doc/en/environment/" class="nav-link">
  Environment
</a></div><div class="nav-item"><a href="/acct-doc/en/assetcenter/" class="nav-link router-link-active">
  AssetCenter
</a></div><div class="nav-item"><a href="http://172.25.132.86:9000/cmpk-api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSF Service
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/acct-doc/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/acct-doc/en/assetcenter/后台设计文档.html" class="nav-link">
  English
</a></li></ul></div></div> <a href="http://8.208.26.203:18082/cmpak/acctmanm" target="_blank" rel="noopener noreferrer" class="repo-link">
    Source
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/acct-doc/en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/acct-doc/en/environment/" class="nav-link">
  Environment
</a></div><div class="nav-item"><a href="/acct-doc/en/assetcenter/" class="nav-link router-link-active">
  AssetCenter
</a></div><div class="nav-item"><a href="http://172.25.132.86:9000/cmpk-api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSF Service
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/acct-doc/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/acct-doc/en/assetcenter/后台设计文档.html" class="nav-link">
  English
</a></li></ul></div></div> <a href="http://8.208.26.203:18082/cmpak/acctmanm" target="_blank" rel="noopener noreferrer" class="repo-link">
    Source
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Asset Center</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/acct-doc/en/assetcenter/" aria-current="page" class="sidebar-link">Asset Center</a></li><li><a href="/acct-doc/en/assetcenter/interface.html" class="sidebar-link">Interface Request &amp; Response</a></li><li><a href="/acct-doc/en/assetcenter/writeoff.html" class="sidebar-link">Writeoff</a></li><li><a href="/acct-doc/en/assetcenter/前台设计文档.html" class="sidebar-link">FrontDesk Design Document</a></li><li><a href="/acct-doc/en/assetcenter/后台设计文档.html" class="active sidebar-link">BackOffice Design Document</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter1-ntn-bill-query" class="sidebar-link">Chapter1 NTN Bill Query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_1-1-basic-description" class="sidebar-link">1.1 Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_1-2-business-process" class="sidebar-link">1.2 Business Process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_1-3-business-table-description" class="sidebar-link">1.3 Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_1-4-key-configuration-instructions" class="sidebar-link">1.4 Key Configuration Instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-2-prepaid-ledger-reconciliation" class="sidebar-link">Chapter 2 Prepaid Ledger Reconciliation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_2-1-basic-description" class="sidebar-link">2.1 Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_2-2-business-process" class="sidebar-link">2.2 business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_2-3-key-configuration-instructions" class="sidebar-link">2.3 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-3-group-tax-payment-process" class="sidebar-link">Chapter 3 Group Tax Payment Process</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_3-1-basic-description" class="sidebar-link">3.1 basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_3-2-business-process" class="sidebar-link">3.2 business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_3-3-key-configuration-instructions" class="sidebar-link">3.3 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-4-individual-tax-payment" class="sidebar-link">Chapter 4 Individual Tax Payment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_4-1-basic-description" class="sidebar-link">4.1 basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_4-2-business-process" class="sidebar-link">4.2 business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_4-3-key-configuration-instructions" class="sidebar-link">4.3 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-5-vc-recharge-synchronization" class="sidebar-link">Chapter 5 VC Recharge Synchronization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_5-1-basic-description" class="sidebar-link">5.1 basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_5-2-business-process" class="sidebar-link">5.2 business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_5-3-key-configuration-instructions" class="sidebar-link">5.3 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-6-tax-collection-document-collection-and-file-generation" class="sidebar-link">Chapter 6 Tax Collection Document Collection and File Generation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_6-1-basic-description" class="sidebar-link">6.1 basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_6-2-business-process" class="sidebar-link">6.2 business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_6-3-key-configuration-instructions" class="sidebar-link">6.3 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-7-recharge-distribution" class="sidebar-link">Chapter 7 Recharge Distribution</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_7-1-basic-description" class="sidebar-link">7.1 Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_7-2-business-process" class="sidebar-link">7.2 business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_7-3-key-configuration-instructions" class="sidebar-link">7.3 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-8-real-time-chargeback-rollback" class="sidebar-link">Chapter 8 Real-time chargeback rollback</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_8-1-basic-description" class="sidebar-link">8.1 basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_8-2-business-process" class="sidebar-link">8.2 Business Process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_8-3-business-table-description" class="sidebar-link">8.3 Business table description:</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-9-data-synchronization-process" class="sidebar-link">Chapter 9 Data Synchronization Process</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_9-1-basic-description" class="sidebar-link">9.1 Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_9-2-business-process" class="sidebar-link">9.2 Business Process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_9-3-business-table-description" class="sidebar-link">9.3 Business Table Description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_9-4-key-configuration-instructions" class="sidebar-link">9.4 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-11-usage" class="sidebar-link">Chapter 11 Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_11-1-basic-description" class="sidebar-link">11.1 Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_11-2-business-process" class="sidebar-link">11.2 Business Process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_11-3-business-table-description" class="sidebar-link">11.3 Business Table Description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#_11-4-key-configuration-instructions" class="sidebar-link">11.4 Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-12-parameter-synchronization-process" class="sidebar-link">Chapter 12 Parameter Synchronization Process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-13-bulk-vc-recharge" class="sidebar-link">Chapter 13 Bulk VC Recharge</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#chapter-14-0-payment-deduction-work-order" class="sidebar-link">Chapter 14 0 Payment Deduction Work Order</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#黄-典-stage" class="sidebar-link">黄 典 stage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions" class="sidebar-link">Key configuration instructions</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-2" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-2" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-2" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-2" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#周琪宏-backstage" class="sidebar-link">周琪宏 Backstage</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#post-paid-sms-reminder" class="sidebar-link">Post-paid SMS reminder</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-3" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-3" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-3" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-3" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#post-paid-number-sms-alert-at-the-end-of-the-month" class="sidebar-link">Post-paid number SMS alert at the end of the month</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-4" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-4" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-4" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-4" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#postpaid-number-mid-month-sms-reminder" class="sidebar-link">Postpaid number Mid-month SMS reminder</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-5" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-5" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-5" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-5" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#reminder-to-use-monthly-fee" class="sidebar-link">Reminder to use monthly fee</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#section-listparagraph" class="sidebar-link">{#section .ListParagraph}</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-6" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-6" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-6" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-6" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#multiple-bill-reminders" class="sidebar-link">Multiple bill reminders</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-7" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-7" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-7" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-7" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#no-mailing-address-reminder" class="sidebar-link">No mailing address reminder</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-8" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-8" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-8" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-8" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#up-to-call-reminder" class="sidebar-link">Up to call reminder</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-9" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-9" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-9" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-9" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#bulk-payment-of-arrears" class="sidebar-link">Bulk payment of arrears</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-10" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-10" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-10" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-10" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#bulk-refund-deposit" class="sidebar-link">Bulk refund deposit</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-11" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-11" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-11" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-11" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#ntn-refund-deposit" class="sidebar-link">NTN refund deposit</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-12" class="sidebar-link">Basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-12" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-12" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-12" class="sidebar-link">Key configuration instructions</a></li></ul></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-13" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-13" class="sidebar-link">Key configuration instructions</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-13" class="sidebar-link">basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-14" class="sidebar-link">business process</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-table-description-13" class="sidebar-link">Business table description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#key-configuration-instructions-14" class="sidebar-link">Key configuration instructions</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#post-bill-task" class="sidebar-link">Post Bill Task</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#basic-description-14" class="sidebar-link">basic description</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#introduction-to-single-number-generation" class="sidebar-link">Introduction to Single Number Generation</a></li><li class="sidebar-sub-header"><a href="/acct-doc/en/assetcenter/后台设计文档.html#business-process-15" class="sidebar-link">business process</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="backoffice-design-document"><a href="#backoffice-design-document" class="header-anchor">#</a> BackOffice Design Document</h1> <p></p><div class="table-of-contents"><ul><li><a href="#chapter1-ntn-bill-query">Chapter1 NTN Bill Query</a><ul><li><a href="#_1-1-basic-description">1.1 Basic description</a></li><li><a href="#_1-2-business-process">1.2 Business Process</a></li><li><a href="#_1-3-business-table-description">1.3 Business table description</a></li><li><a href="#_1-4-key-configuration-instructions">1.4 Key Configuration Instructions</a></li></ul></li><li><a href="#chapter-2-prepaid-ledger-reconciliation">Chapter 2 Prepaid Ledger Reconciliation</a><ul><li><a href="#_2-1-basic-description">2.1 Basic description</a></li><li><a href="#_2-2-business-process">2.2 business process</a></li><li><a href="#_2-3-key-configuration-instructions">2.3 Key configuration instructions</a></li></ul></li><li><a href="#chapter-3-group-tax-payment-process">Chapter 3 Group Tax Payment Process</a><ul><li><a href="#_3-1-basic-description">3.1 basic description</a></li><li><a href="#_3-2-business-process">3.2 business process</a></li><li><a href="#_3-3-key-configuration-instructions">3.3 Key configuration instructions</a></li></ul></li><li><a href="#chapter-4-individual-tax-payment">Chapter 4 Individual Tax Payment</a><ul><li><a href="#_4-1-basic-description">4.1 basic description</a></li><li><a href="#_4-2-business-process">4.2 business process</a></li><li><a href="#_4-3-key-configuration-instructions">4.3 Key configuration instructions</a></li></ul></li><li><a href="#chapter-5-vc-recharge-synchronization">Chapter 5 VC Recharge Synchronization</a><ul><li><a href="#_5-1-basic-description">5.1 basic description</a></li><li><a href="#_5-2-business-process">5.2 business process</a></li><li><a href="#_5-3-key-configuration-instructions">5.3 Key configuration instructions</a></li></ul></li><li><a href="#chapter-6-tax-collection-document-collection-and-file-generation">Chapter 6 Tax Collection Document Collection and File Generation</a><ul><li><a href="#_6-1-basic-description">6.1 basic description</a></li><li><a href="#_6-2-business-process">6.2 business process</a></li><li><a href="#_6-3-key-configuration-instructions">6.3 Key configuration instructions</a></li></ul></li><li><a href="#chapter-7-recharge-distribution">Chapter 7 Recharge Distribution</a><ul><li><a href="#_7-1-basic-description">7.1 Basic description</a></li><li><a href="#_7-2-business-process">7.2 business process</a></li><li><a href="#_7-3-key-configuration-instructions">7.3 Key configuration instructions</a></li></ul></li><li><a href="#chapter-8-real-time-chargeback-rollback">Chapter 8 Real-time chargeback rollback</a><ul><li><a href="#_8-1-basic-description">8.1 basic description</a></li><li><a href="#_8-2-business-process">8.2 Business Process</a></li><li><a href="#_8-3-business-table-description">8.3 Business table description:</a></li></ul></li><li><a href="#chapter-9-data-synchronization-process">Chapter 9 Data Synchronization Process</a><ul><li><a href="#_9-1-basic-description">9.1 Basic description</a></li><li><a href="#_9-2-business-process">9.2 Business Process</a></li><li><a href="#_9-3-business-table-description">9.3 Business Table Description</a></li><li><a href="#_9-4-key-configuration-instructions">9.4 Key configuration instructions</a></li></ul></li><li><a href="#chapter-11-usage">Chapter 11 Usage</a><ul><li><a href="#_11-1-basic-description">11.1 Basic description</a></li><li><a href="#_11-2-business-process">11.2 Business Process</a></li><li><a href="#_11-3-business-table-description">11.3 Business Table Description</a></li><li><a href="#_11-4-key-configuration-instructions">11.4 Key configuration instructions</a></li></ul></li><li><a href="#chapter-12-parameter-synchronization-process">Chapter 12 Parameter Synchronization Process</a></li><li><a href="#chapter-13-bulk-vc-recharge">Chapter 13 Bulk VC Recharge</a></li><li><a href="#chapter-14-0-payment-deduction-work-order">Chapter 14 0 Payment Deduction Work Order</a></li><li><a href="#黄-典-stage">黄 典 stage</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#周琪宏-backstage">周琪宏 Backstage</a></li><li><a href="#post-paid-sms-reminder">Post-paid SMS reminder</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#post-paid-number-sms-alert-at-the-end-of-the-month">Post-paid number SMS alert at the end of the month</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#postpaid-number-mid-month-sms-reminder">Postpaid number Mid-month SMS reminder</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#reminder-to-use-monthly-fee">Reminder to use monthly fee</a></li><li><a href="#section-listparagraph">{#section .ListParagraph}</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#multiple-bill-reminders">Multiple bill reminders</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#no-mailing-address-reminder">No mailing address reminder</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#up-to-call-reminder">Up to call reminder</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#bulk-payment-of-arrears">Bulk payment of arrears</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#bulk-refund-deposit">Bulk refund deposit</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#ntn-refund-deposit">NTN refund deposit</a><ul><li><a href="#basic-description">Basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li></ul></li><li><a href="#business-process">business process</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li><li><a href="#basic-description">basic description</a></li><li><a href="#business-process">business process</a></li><li><a href="#business-table-description">Business table description</a></li><li><a href="#key-configuration-instructions">Key configuration instructions</a></li><li><a href="#post-bill-task">Post Bill Task</a><ul><li><a href="#basic-description">basic description</a></li><li><a href="#introduction-to-single-number-generation">Introduction to Single Number Generation</a></li><li><a href="#business-process">business process</a></li></ul></li></ul></div><p></p> <h2 id="chapter1-ntn-bill-query"><a href="#chapter1-ntn-bill-query" class="header-anchor">#</a> Chapter1 NTN Bill Query</h2> <h3 id="_1-1-basic-description"><a href="#_1-1-basic-description" class="header-anchor">#</a> 1.1 Basic description</h3> <p>Through NTN, DEPT, start and end months, real-time statistics of the total monthly payment amount, historical arrears, and payment amount of current NTN members,</p> <p>The total historical arrears of NTN members, total real-time monthly bills, balances, creditworthiness, general billing information, post-paid details and pre-paid details</p> <h3 id="_1-2-business-process"><a href="#_1-2-business-process" class="header-anchor">#</a> 1.2 Business Process</h3> <ol><li><p>Enter NTN number, start and end month, and DEPT optional;</p></li> <li><p>Click Query to generate an NTN work order;</p></li> <li><p>NTN Bill Query's work order will be processed asynchronously to generate member details;</p></li> <li><p>Background processing logic see background document</p></li></ol> <h3 id="_1-3-business-table-description"><a href="#_1-3-business-table-description" class="header-anchor">#</a> 1.3 Business table description</h3> <ol><li><p>NTN work order table</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> cen<span class="token punctuation">.</span>AM_NTN_TASK<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>NTN details</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> cen<span class="token punctuation">.</span>AM_NTN_TASK_DETAILS
</code></pre></div></li> <li><p>NTN Fee Information</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> cen<span class="token punctuation">.</span>AM_NTN_FEE<span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="_1-4-key-configuration-instructions"><a href="#_1-4-key-configuration-instructions" class="header-anchor">#</a> 1.4 Key Configuration Instructions</h3> <h2 id="chapter-2-prepaid-ledger-reconciliation"><a href="#chapter-2-prepaid-ledger-reconciliation" class="header-anchor">#</a> Chapter 2 Prepaid Ledger Reconciliation</h2> <h3 id="_2-1-basic-description"><a href="#_2-1-basic-description" class="header-anchor">#</a> 2.1 Basic description</h3> <p>Prepaid ledger batch transfer. Import the EXCEl form from the front desk. Call the prepaid ledger account adjustment interface in turn according to the imported number</p> <h3 id="_2-2-business-process"><a href="#_2-2-business-process" class="header-anchor">#</a> 2.2 business process</h3> <p>Front-end verification logic</p> <p>a) The added mobile phone number cannot be duplicated</p> <p>Commit logic</p> <p>2.1 CPR_NO is entered, you need to check if cprNo is repeated</p> <p>2.2 OUT_GOING_VALIDATY (changed life cycle days) entered</p> <p>a) Query the life cycle life failure time, add the specified time to the failure time, and re-assign it to the map</p> <p>2.3 If the amount is greater than 0, follow the recharge logic</p> <p>2.4 If the amount is less than 0, the deduction logic is used.</p> <p>2.5 Write an adjustment record-&gt; AM_ADJUSTMENT_REC</p> <ol start="3"><li>Deduction logic (note: negative amount is deduction), the main logic is in-&gt; PrepaidDeductLogic # doDeduct</li></ol> <p>3.1 Collected deductions</p> <p>3.2 Set transaction information, that is, use the input value to assign value to tradeBean, which is convenient for various values ​​of tradeBean later</p> <p>3.3 Consolidate the amount of the same account ID in the list to be deducted</p> <p>3.4 Query the list of prepaid ledgers</p> <p>3.5 Withholding list and ledger list to withhold information to obtain ledger information to be deducted</p> <p>a) Traversing the list to be deducted</p> <p>b) the logic of the increase</p> <ol><li><p>When specifying the ledger id, find the designated ledger and increase the balance, if it does not exist, create a new ledger</p></li> <li><p>When no ledger id is specified, find the general ledger and increase the balance, if it does not exist, create a new ledger</p></li></ol> <p>d) Logic when turning down</p> <ol><li><p>When specifying the ledger id, find the designated ledger and deduct the ledger balance.</p></li> <li><p>When no ledger id is specified, find the general ledger and deduct the ledger balance</p></li> <li><p>The account balance is insufficient to deduct, and an error is reported directly</p></li></ol> <p>3.6 Get the list of ledger deductions and submit the ledger</p> <p>a) Amount greater than 0, insert and publish</p> <p>b) The amount is less than 0, deducted through webservice</p> <p>3.7 Writing business logs</p> <p>3.8 Manually changing the user life cycle</p> <p>3.9 Record accumulated information and insert notification form</p> <p>3.10 Send SMS</p> <ol start="4"><li>webservice deduction</li></ol> <p>4.1 Organization parameters, adjusting webservice deductions</p> <p>4.2 Another transaction, insert a positive balance into the rollback table to prevent subsequent failures. The balance deducted by the webservice is good to roll back the business table.</p> <h3 id="_2-3-key-configuration-instructions"><a href="#_2-3-key-configuration-instructions" class="header-anchor">#</a> 2.3 Key configuration instructions</h3> <blockquote><p>Task processing interface: asset_ITaskCSV_adjustBalance</p></blockquote> <p>Ticket configuration:</p> <p>`` `sql
select t. *, rowid from param.bs_work_order_conf t where t.order_code = 'BatchBalanceAdjust';</p> <p>select t. *, rowid from param.bs_work_order_channel t where t.order_code = 'BatchBalanceAdjust';
`` `</p> <p>Work Order Form:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> t<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>rowid <span class="token keyword">from</span> cen<span class="token punctuation">.</span>am_batch_adjust_balance t<span class="token punctuation">;</span>
</code></pre></div><h2 id="chapter-3-group-tax-payment-process"><a href="#chapter-3-group-tax-payment-process" class="header-anchor">#</a> Chapter 3 Group Tax Payment Process</h2> <h3 id="_3-1-basic-description"><a href="#_3-1-basic-description" class="header-anchor">#</a> 3.1 basic description</h3> <p>Enter the NTN account number at the front desk, select the starting month, and enter the span period.</p> <h3 id="_3-2-business-process"><a href="#_3-2-business-process" class="header-anchor">#</a> 3.2 business process</h3> <p>a) Query the data of group tax payment worksheet status 0 at regular intervals.</p> <p>b) Call the personal tax payment query interface to query the tax payment information according to the retrieved data.</p> <p>c) Update the found results to the group tax bill form.</p> <h3 id="_3-3-key-configuration-instructions"><a href="#_3-3-key-configuration-instructions" class="header-anchor">#</a> 3.3 Key configuration instructions</h3> <p>acctmanmassetprocesssrcmainjavacomaiaccoretaxtaskGroupTaxCertifyGenTask.java</p> <p>Ticket configuration:</p> <p>`` `sql
select t. *, rowid from param.bs_task t where task_code = 'GroupTaxCertifyGenTask';</p> <p>select t. *, rowid from param.bs_task_channel t where task_code = 'GroupTaxCertifyGenTask';
`` `</p> <p>Work Order Form:</p> <p><code>`sql select t. *, rowid from CEN.AM_NTN_TAX_CERTIFY t WHERE T.NTN_ID = '0022370-7' and t.certify_cycle = '201807: 12'; --Query based on ntn_id dept_id and phone_id</code> `</p> <h2 id="chapter-4-individual-tax-payment"><a href="#chapter-4-individual-tax-payment" class="header-anchor">#</a> Chapter 4 Individual Tax Payment</h2> <h3 id="_4-1-basic-description"><a href="#_4-1-basic-description" class="header-anchor">#</a> 4.1 basic description</h3> <p>Import batch files at the front desk, select the account period and month, click Import, and asynchronously query the tax payment information in the background, generate pdf according to the number, and upload to the pdf host. Update the work order table and save the work order information. The front desk queries the import information according to the batch number.</p> <h3 id="_4-2-business-process"><a href="#_4-2-business-process" class="header-anchor">#</a> 4.2 business process</h3> <p>d) Query the master batch of personal tax payment first to obtain the batch number</p> <p>e) Query individual batch tax payment details according to batch number and retrieve number information</p> <p>f) Query tax payment information according to the number, generate pdf, and upload to ftp host.</p> <h3 id="_4-3-key-configuration-instructions"><a href="#_4-3-key-configuration-instructions" class="header-anchor">#</a> 4.3 Key configuration instructions</h3> <p>acctmanmassetprocesssrcmainjavacomaiaccoretaxtaskBulkTaxCertifyGenTask.java</p> <p>Ticket configuration:</p> <p>`` `sql
select t. *, rowid from param.bs_task t where task_code = BulkTaxCertifyGenTask;</p> <p>select t. *, rowid from param.bs_task_channel t where task_code = BulkTaxCertifyGenTask;
`` `</p> <p>Work Order Form:</p> <p>`` `sql
SELECT BATCH_ID, STS FROM AM_BULK_TAX_CERTIFY WHERE STS = ?;</p> <p>SELECT BATCH_ID, REGION_CODE, PHONE_ID, ACCT_ID, CUST_ID, CERTIFY_CYCLE, STS FROM AM_BULK_TAX_CERTIFY_DTL WHERE BATCH_ID =? AND STS = 0;
`` `</p> <h2 id="chapter-5-vc-recharge-synchronization"><a href="#chapter-5-vc-recharge-synchronization" class="header-anchor">#</a> Chapter 5 VC Recharge Synchronization</h2> <h3 id="_5-1-basic-description"><a href="#_5-1-basic-description" class="header-anchor">#</a> 5.1 basic description</h3> <p>The Vc platform recharges and synchronizes the recharge records to the VC record table of the central bank of account management. Ticket processing records. Synchronize the recharge information to the account management business flow meter and channel business flow meter.</p> <h3 id="_5-2-business-process"><a href="#_5-2-business-process" class="header-anchor">#</a> 5.2 business process</h3> <p>g) Get work order with status 0 in work order table</p> <p>h) ETOP recharge calls the ETOP synchronization interface, queries the agent information, records am_busi, ag_busi, and channel business table.</p> <p>i) The prepaid card calls the prepaid card interface and records am_busi</p> <p>j) ETop transfer record ETOP transfer interface, query agent information, record am_busi, ag_busi, channel business table.</p> <h3 id="_5-3-key-configuration-instructions"><a href="#_5-3-key-configuration-instructions" class="header-anchor">#</a> 5.3 Key configuration instructions</h3> <p>asset_ITaskCSV_reprocessRechargeRec</p> <p>Ticket configuration:</p> <p>`` `sql
select t. *, rowid from param.bs_task t where task_code = 'ReprocessRechargeRec';</p> <p>select t. *, rowid from param.bs_task_channel t where task_code = 'ReprocessRechargeRec';
`` `</p> <p>Work Order Form:</p> <p><code>`sql SELECT A. *, A.ROWID, A.OP_ID AS TRADE_OP_ID, A.SO_ORG_ID AS TRADE_ORG_ID, A.SO_COUNTY_CODE AS TRADE_COUNTY_CODE, A.SO_REGION_CODE AS TRADE_REGION_ID FROM AM_CHARGE_REC_DONE A WHERE A.FLAG = 0</code> `</p> <h2 id="chapter-6-tax-collection-document-collection-and-file-generation"><a href="#chapter-6-tax-collection-document-collection-and-file-generation" class="header-anchor">#</a> Chapter 6 Tax Collection Document Collection and File Generation</h2> <h3 id="_6-1-basic-description"><a href="#_6-1-basic-description" class="header-anchor">#</a> 6.1 basic description</h3> <h3 id="_6-2-business-process"><a href="#_6-2-business-process" class="header-anchor">#</a> 6.2 business process</h3> <ol><li><p>Obtain payment records from the am_busi and am_recive_fee tables according to the tax payment cycle</p></li> <li><p>Call the tax payment query interface to generate personal tax payment information and save it in the table</p></li> <li><p>Start the tax payment file generation process, upload the txt file to the ftp host</p></li></ol> <h3 id="_6-3-key-configuration-instructions"><a href="#_6-3-key-configuration-instructions" class="header-anchor">#</a> 6.3 Key configuration instructions</h3> <p>acctmanmassetprocesssrcmainjavacomaiaccoretaxtaskTaxCertifyCollectTask.java</p> <blockquote></blockquote> <p>acctmanmassetprocesssrcmainjavacomaiaccoretaxtaskTaxCertifyFileGenerateTask.java</p> <p>Ticket configuration:</p> <p><code>`sql select t. *, rowid from param.bs_task t where task_code = 'TaxCertifyCollectTask; select t. *, rowid from param.bs_task_channel t where task_code = 'TaxCertifyCollectTask; select t. *, rowid from param.bs_task t where task_code = 'TaxCertifyFileGenerateTask'; select t. *, rowid from param.bs_task_channel t where task_code = 'TaxCertifyFileGenerateTask';</code> `</p> <h2 id="chapter-7-recharge-distribution"><a href="#chapter-7-recharge-distribution" class="header-anchor">#</a> Chapter 7 Recharge Distribution</h2> <h3 id="_7-1-basic-description"><a href="#_7-1-basic-description" class="header-anchor">#</a> 7.1 Basic description</h3> <h3 id="_7-2-business-process"><a href="#_7-2-business-process" class="header-anchor">#</a> 7.2 business process</h3> <ol><li><p>Get query parameters from the parameter library</p></li> <li><p>Distribute data to the distribution purpose table in accordance with the distribution rules</p></li></ol> <h3 id="_7-3-key-configuration-instructions"><a href="#_7-3-key-configuration-instructions" class="header-anchor">#</a> 7.3 Key configuration instructions</h3> <p>acctmanmassetprocesssrcmainjavacomaiaccorepaymenttaskRechargeNotifySplitTask.java</p> <p>Ticket configuration:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> t<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>rowid <span class="token keyword">from</span> param<span class="token punctuation">.</span>bs_task t <span class="token keyword">where</span> task_code<span class="token operator">=</span> <span class="token string">'RechargeNotifySplitTask;

select t.*,rowid from param.bs_task_channel t where task_code= '</span>RechargeNotifySplitTask<span class="token punctuation">;</span>
</code></pre></div><p>Parameter table：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> param<span class="token punctuation">.</span>bs_sys_profile t <span class="token keyword">where</span> t<span class="token punctuation">.</span>para_type <span class="token operator">=</span><span class="token string">' RECHARGE_NTY_SPLIT'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="chapter-8-real-time-chargeback-rollback"><a href="#chapter-8-real-time-chargeback-rollback" class="header-anchor">#</a> Chapter 8 Real-time chargeback rollback</h2> <h3 id="_8-1-basic-description"><a href="#_8-1-basic-description" class="header-anchor">#</a> 8.1 basic description</h3> <p>Webservice interface chargeback failed, rollback</p> <h3 id="_8-2-business-process"><a href="#_8-2-business-process" class="header-anchor">#</a> 8.2 Business Process</h3> <ol><li>The charge is successfully inserted into the AM_DEDUCT_INBOSS table to record a piece of data when the independent thing is opened</li> <li>The business successfully deleted the recorded data</li> <li>Take the data ten minutes ago and adjust the rolled back webservice interface to ensure consistency</li></ol> <h3 id="_8-3-business-table-description"><a href="#_8-3-business-table-description" class="header-anchor">#</a> 8.3 Business table description:</h3> <table><thead><tr><th>Table name</th> <th>Description</th></tr></thead> <tbody><tr><td>AM_DEDUCT_INBOSS</td> <td>Refund Record Form</td></tr></tbody></table> <p>Key configuration instructions:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--Task configuration How long ago can be configured in SQL</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> PARAM<span class="token punctuation">.</span>bs_work_order_conf <span class="token keyword">where</span> ORDER_CODE <span class="token operator">=</span> <span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CONF <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> ORDER_NAME<span class="token punctuation">,</span> G_SELECT_SQL<span class="token punctuation">,</span> G_UPDATE_SQL<span class="token punctuation">,</span> G_SLEEP_STRATEGY<span class="token punctuation">,</span> G_QUEUE_LENGTH<span class="token punctuation">,</span> S_SERVICE_URI<span class="token punctuation">,</span> S_EXCEPTION_SQL<span class="token punctuation">,</span> CHANNEL_NUMBER<span class="token punctuation">,</span> CHANNEL_FIELD<span class="token punctuation">,</span> CHECK_RULE<span class="token punctuation">,</span> STATE<span class="token punctuation">,</span> EFFECTIVE_DATE<span class="token punctuation">,</span> EXPIRE_DATE<span class="token punctuation">,</span> REGION_ID<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token string">'RollBack'</span><span class="token punctuation">,</span> <span class="token string">'SELECT A.*, A.ROWID  FROM AM_DEDUCT_INBOSS A  WHERE A.PARTITION_ID IN (:TODAY, :YESTERDAY) AND A.STS = 0 AND A.INSERT_DATE &lt; SYSDATE - numtodsinterval(600,''second'')'</span><span class="token punctuation">,</span> <span class="token string">'UPDATE AM_DEDUCT_INBOSS A SET A.STS = ''1'' WHERE A.ROWID = :ROWID'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'asset_ITaskCSV_inbossRefund'</span><span class="token punctuation">,</span> <span class="token string">'UPDATE AM_DEDUCT_INBOSS A SET A.STS = ''3'' WHERE A.ROWID = :ROWID'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">'ACCT_ID'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'U'</span><span class="token punctuation">,</span> TO_DATE<span class="token punctuation">(</span><span class="token string">'2016-10-01 00:00:00'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> TO_DATE<span class="token punctuation">(</span><span class="token string">'2050-12-31 00:00:00'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Eight centers, divided into eight channels</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> param<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token keyword">where</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL<span class="token punctuation">.</span>ORDER_CODE<span class="token operator">=</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC1'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC2'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC3'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC4'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC5'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC6'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC7'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PARAM<span class="token punctuation">.</span>BS_WORK_ORDER_CHANNEL <span class="token punctuation">(</span>ORDER_CODE<span class="token punctuation">,</span> CHANNEL_NO<span class="token punctuation">,</span> START_ID<span class="token punctuation">,</span> END_ID<span class="token punctuation">,</span> G_DATABASE<span class="token punctuation">,</span> REGION_IDS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'PROCESS_INBOSS_REFUND_TASK'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'AC8'</span><span class="token punctuation">,</span> <span class="token string">'ZZZZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="chapter-9-data-synchronization-process"><a href="#chapter-9-data-synchronization-process" class="header-anchor">#</a> Chapter 9 Data Synchronization Process</h2> <h3 id="_9-1-basic-description"><a href="#_9-1-basic-description" class="header-anchor">#</a> 9.1 Basic description</h3> <p>Configure table names, fields, data sources, and synchronize table data</p> <h3 id="_9-2-business-process"><a href="#_9-2-business-process" class="header-anchor">#</a> 9.2 Business Process</h3> <ol><li>Query data based on the source data source</li> <li>Insert data into the target table of the target data source</li> <li>Delete the source data and move it into the history table</li></ol> <h3 id="_9-3-business-table-description"><a href="#_9-3-business-table-description" class="header-anchor">#</a> 9.3 Business Table Description</h3> <p>Table name | Description |
| ----------------------- | ------------------------- ----------------------------------- |
DATA_TRANS_TASK_CHANNEL | COLUMNS: Columns that need to be synchronized, <br> Source table and target table fields are inconsistent. AS can be used to ensure consistency Separate <br> Example: <br> CA_ADJ_DATA: CA_ADJ_DATA_0 $ REGION_CODE $, <br> ca_asset_syn: ca_asset_syn_0 $ REGION_CODE $ _ $ ACC_MOD $ <br> $ Replace character $, need to query the column or replace the code field Can be configured in COLUMNS |</p> <h3 id="_9-4-key-configuration-instructions"><a href="#_9-4-key-configuration-instructions" class="header-anchor">#</a> 9.4 Key configuration instructions</h3> <p>`` `sql
--Reconciliation data
delete from PARAM.BS_TASK_CHANNEL where TASK_CODE='CaAdjDataTransTask';
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '1', null, null, null, null, null, null, null, '1');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '2', null, null, null, null, null, null, null, '2');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '3', null, null, null, null, null, null, null, '3');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '4', null, null, null, null, null, null, null, '4');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '5', null, null, null, null, null, null, null, '5');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '6', null, null, null, null, null, null, null, '6');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '7', null, null, null, null, null, null, null, '7');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAdjDataTransTask', '8', null, null, null, null, null, null, null, '8');
delete from PARAM.DATA_TRANS_TASK_CHANNEL where TASK_CODE='CaAdjDataTransTask';
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '1', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC1', 'AC1', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '2', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC2', 'AC2', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '3', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC3', 'AC3', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '4', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC4', 'AC4', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '5', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC5', 'AC5', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '6', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC6', 'AC6', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '7', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC7', 'AC7', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAdjDataTransTask', '8', 'SERIAL_ID,PARTITION_ID,RESOURCE_ID,ACCT_ID,PAY_ACCT_ID,USER_TYPE,CHARGE_DATE,BILL_BEGIN_DATE,BILL_END_DATE,DEDUCT_TIME,OPERATIOIN_TIME,BILLING_PLAN_ID,PRODUCT_OFFER_ID,MEASURE_ID,BILL_FEE,ITEM_CODE,BILLING_TYPE,INCLUDE_TAX_FLAG,OWNER_TYPE,IS_REAL,BILL_FLAG,STS,STS_DATE,RESULT,USER_LIFE_CYCLE,BRAND,REGION_CODE,PHONE_CODE,GEN_DATE,TOPUP_NUMBER,SO_NBR,BUSI_CODE,REMARKS,TENANT_ID', 'CA_ADJ_DATA:CA_ADJ_DATA_0$REGION_CODE$', 'AC8', 'AC8', 'AD', 'CA_ADJ_DATA_H', 10000, 1000, 'SERIAL_ID');</p> <p>--Asset syn
delete from PARAM.BS_TASK_CHANNEL where TASK_CODE='CaAssetSynDataTransTask';
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '1', null, null, null, null, null, null, null, '1');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '2', null, null, null, null, null, null, null, '2');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '3', null, null, null, null, null, null, null, '3');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '4', null, null, null, null, null, null, null, '4');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '5', null, null, null, null, null, null, null, '5');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '6', null, null, null, null, null, null, null, '6');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '7', null, null, null, null, null, null, null, '7');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('CaAssetSynDataTransTask', '8', null, null, null, null, null, null, null, '8');
delete from PARAM.DATA_TRANS_TASK_CHANNEL where TASK_CODE='CaAssetSynDataTransTask';
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '1', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$<em>$ACC_MOD$', 'AC1', 'AC1', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '2', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$</em>$ACC_MOD$', 'AC2', 'AC2', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '3', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$<em>$ACC_MOD$', 'AC3', 'AC3', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '4', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$</em>$ACC_MOD$', 'AC4', 'AC4', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '5', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$<em>$ACC_MOD$', 'AC5', 'AC5', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '6', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$</em>$ACC_MOD$', 'AC6', 'AC6', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '7', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$<em>$ACC_MOD$', 'AC7', 'AC7', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');
INSERT INTO PARAM.DATA_TRANS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, COLUMNS, TABLES, SOURCE_DATASOURCE, HIS_DATASOURCE, TARGET_DATASOURCE, HIS_TABLENAME, SLEEP, PROCESS_NUM, ORDER_COLUMNS) VALUES ('CaAssetSynDataTransTask', '8', 'SYN_ID,PARTITION_ID,ASSET_ID,SYN_TYPE,ACCT_ID,ASSET_TYPE,ASSET_ITEM,ASSET_AMOUNT,BILL_FEE,SYNC_FLAG,NOTIFY_FLAG,SYNC_TYPE,VALID_DATE,EXPIRE_DATE,CREATE_DATE,STS,STS_DATE,SO_NBR,SO_DATE,REMARK,TENANT_ID,REGION_CODE,BILLING_TYPE,DEAL_AMOUNT,NEW_BILL_FEE,OLD_BILL_FEE,MOD(ACCT_ID,4) AS ACC_MOD', 'ca_asset_syn:ca_asset_syn_0$REGION_CODE$</em>$ACC_MOD$', 'AC8', 'AC8', 'AD', 'ca_asset_syn_h', 500, 1000, 'SYN_ID');</p> <div class="language- extra-class"><pre class="language-text"><code>


## Chapter 10 External Fee Synchronization

### 10.1 Basic description

Synchronize I_FEE table and I_DATA_INDEX table from the account management library to the JD library

### 10.2 Business Process

1. Get the I_DATA_INDEX table data
  2. Associate I/FEE_yyyyMM table data with so_nbr
        3. Move the two table data to the corresponding table of the JD library
            4. Delete the I_DATA_INDEX table data and relocate the history table, the I_FEE_yyyyMM table data does not move

### 10.3 Key Table Description

Table name | Description |
| ------------ | -------------- |
| I_DATA_INDEX | External Expense Index Table |
| I_FEE_yyyyMM | External Expense Table |

### 10.4 Key configuration instructions

`` `sql
--Task configuration
delete from PARAM.bs_task where task_code = 'IFeeTransTask';
insert into param.bs_task (TASK_CODE, TASK_NAME, TASK_GRP_CODE, TASK_GRP_NAME, CHANNEL_NUMBER, CHANNEL_FIELD, TASK_GRP_ORDER, TASK_ORDER, WRITE_MODE, FILE_RECORD, USE_FLAG, CENTER_TYPE, REGION_ID, OP_ID, ORG_ID, CLASS_NAME, COUNTY_CODE)
values ('IFeeTransTask', '外部费用导入表数据搬迁进程', 'CEN', '账管', '1', null, null, null, null, null, 'U', 'CEN', '0000', '99990298', '10000001', 'com.ai.ac.core.datatrans.task.IFeeTransTask', null);

--External costs Eight banks, eight channels
delete from PARAM.BS_TASK_CHANNEL where TASK_CODE='IFeeTransTask';
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '1', null, null, 1000, null, null, 'AC', null, '1');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '2', null, null, 1000, null, null, 'AC', null, '2');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '3', null, null, 1000, null, null, 'AC', null, '3');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '4', null, null, 1000, null, null, 'AC', null, '4');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '5', null, null, 1000, null, null, 'AC', null, '5');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '6', null, null, 1000, null, null, 'AC', null, '6');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '7', null, null, 1000, null, null, 'AC', null, '7');
INSERT INTO PARAM.BS_TASK_CHANNEL (TASK_CODE, CHANNEL_NO, START_ID, END_ID, BATCH_NUMBER, INPUT_PATH, OUTPUT_PATH, CENTER_TYPE, REGION_IDS, CENTER) VALUES ('IFeeTransTask', '8', null, null, 1000, null, null, 'AC', null, '8');
</code></pre></div><h2 id="chapter-11-usage"><a href="#chapter-11-usage" class="header-anchor">#</a> Chapter 11 Usage</h2> <h3 id="_11-1-basic-description"><a href="#_11-1-basic-description" class="header-anchor">#</a> 11.1 Basic description</h3> <blockquote><p>com.ai.ac.core.asset.task.DailyPrepaidUsageData</p> <p>Send usage to users who have subscribed to a plan</p></blockquote> <h3 id="_11-2-business-process"><a href="#_11-2-business-process" class="header-anchor">#</a> 11.2 Business Process</h3> <ol><li>Query users who have ordered the specified package</li></ol> <h3 id="_11-3-business-table-description"><a href="#_11-3-business-table-description" class="header-anchor">#</a> 11.3 Business Table Description</h3> <h3 id="_11-4-key-configuration-instructions"><a href="#_11-4-key-configuration-instructions" class="header-anchor">#</a> 11.4 Key configuration instructions</h3> <p><code>`sql --Specify package configuration select * from base.BS_SMS_SERVER_CONFIG where COMMAND_ID = 'PRE_ALT_1_SMS_PROMID';</code> `</p> <h2 id="chapter-12-parameter-synchronization-process"><a href="#chapter-12-parameter-synchronization-process" class="header-anchor">#</a> Chapter 12 Parameter Synchronization Process</h2> <h2 id="chapter-13-bulk-vc-recharge"><a href="#chapter-13-bulk-vc-recharge" class="header-anchor">#</a> Chapter 13 Bulk VC Recharge</h2> <h2 id="chapter-14-0-payment-deduction-work-order"><a href="#chapter-14-0-payment-deduction-work-order" class="header-anchor">#</a> Chapter 14 0 Payment Deduction Work Order</h2> <h2 id="黄-典-stage"><a href="#黄-典-stage" class="header-anchor">#</a> 黄 典 stage</h2> <h1 id="transfer-money"><a href="#transfer-money" class="header-anchor">#</a> Transfer money</h1> <h3 id="basic-description"><a href="#basic-description" class="header-anchor">#</a> Basic description</h3> <p>When ordering transfers at crm, there is a fixed bonus amount for each cycle.</p> <h3 id="business-process"><a href="#business-process" class="header-anchor">#</a> business process</h3> <p>Order the corresponding marketing activities on the crm page, wait for the process to complete, and check whether the data in the related accounting management tables is normal</p> <p>Event acceptance form AC * .AM_APPORTION will have an acceptance record</p> <p>Scan the AC * .AM_APPORTION_PLAN table regularly to retrieve the data to be returned</p> <p>The amount of the previous month's refund will be cleared before the refund</p> <p>Record business form, send SMS</p> <h3 id="business-table-description"><a href="#business-table-description" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>AM_APPORTION</th> <th>Event Acceptance Form</th></tr></thead> <tbody><tr><td>AM_APPORTION_PLAN</td> <td>Allocation Plan Table</td></tr> <tr><td>AM_RETURN</td> <td>Allocation log table</td></tr> <tr><td>AM_RETURN_ERROR</td> <td>Allocated Error Log Table</td></tr> <tr><td>AM_APPORTION_REFUND_mm</td> <td>Allocation plan backup table</td></tr></tbody></table> <h3 id="key-configuration-instructions"><a href="#key-configuration-instructions" class="header-anchor">#</a> Key configuration instructions</h3> <table><thead><tr><th>AM_PRICE_PLAN</th> <th>Pricing Plan Definition Table</th></tr></thead> <tbody><tr><td>AM_PRICE_PLAN_COMP</td> <td>Pricing Plan Composition Table</td></tr> <tr><td>AM_PRICE_PLAN_APP_RULE</td> <td>Return Rule Definition Table</td></tr> <tr><td>AM_PRICE_PLAN_ATTR</td> <td>Pricing Plan Attribute Table</td></tr> <tr><td>AM_PRICE_PLAN_APP_SEG</td> <td>Segmented return rule table</td></tr></tbody></table> <hr> <h1 id="transfer-last-month-cleared"><a href="#transfer-last-month-cleared" class="header-anchor">#</a> Transfer last month cleared</h1> <h3 id="basic-description-2"><a href="#basic-description-2" class="header-anchor">#</a> Basic description</h3> <p>Clear the ledger in the next cycle after the end of the transfer activity</p> <h3 id="business-process-2"><a href="#business-process-2" class="header-anchor">#</a> business process</h3> <p>Retrieve data from the AM_APPORTION_PLAN table transfer and clear the ledger</p> <h3 id="business-table-description-2"><a href="#business-table-description-2" class="header-anchor">#</a> Business table description</h3> <hr> <p>AM_APPORTION Event Acceptance Form
AM_APPORTION_PLAN allocation plan
AM_RETURN assessment log table
AM_RETURN_ERROR shared error log table
AM_APPORTION_REFUND_mm Allocation plan backup table</p> <hr> <h3 id="key-configuration-instructions-2"><a href="#key-configuration-instructions-2" class="header-anchor">#</a> Key configuration instructions</h3> <hr> <p>AM_PRICE_PLAN pricing plan definition table
AM_PRICE_PLAN_COMP pricing plan composition table
AM_PRICE_PLAN_APP_RULE Return rule definition table
AM_PRICE_PLAN_ATTR pricing plan attribute table
AM_PRICE_PLAN_APP_SEG Segmented return rule table</p> <hr> <h2 id="周琪宏-backstage"><a href="#周琪宏-backstage" class="header-anchor">#</a> 周琪宏 Backstage</h2> <h2 id="post-paid-sms-reminder"><a href="#post-paid-sms-reminder" class="header-anchor">#</a> Post-paid SMS reminder</h2> <h3 id="basic-description-3"><a href="#basic-description-3" class="header-anchor">#</a> Basic description</h3> <p>Post-paid text message reminder.</p> <h3 id="business-process-3"><a href="#business-process-3" class="header-anchor">#</a> business process</h3> <p>Process class: OutBillNotifyTask/OutBillNotifyGenerator</p> <p>Scan mailing bill data sheet</p> <ol start="2"><li><p>Check the discount list, and only get the discount on the account, check the product</p></li> <li><p>Query the data of three households, and take the user status between 0 and 10.</p></li> <li><p>Query monthly payment information. If the payment amount is greater than 0, generate a short message, otherwise generate another short message.</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-3"><a href="#business-table-description-3" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>CEN.AM_MAIL_MAIN_201908</th> <th>Mailing Bill Data Sheet (Scan)</th></tr></thead> <tbody><tr><td>CEN.AM_MAIL_MAIN_AUX_201908</td> <td>Mailing Bill Data Expansion Table</td></tr> <tr><td>AD.CA_PARA_LIMITSETTING</td> <td>Discount Table</td></tr> <tr><td>crm1.um_subscriber_921</td> <td>Three-family profile, user status between 0 and 10</td></tr> <tr><td>party.cm_account</td> <td></td></tr></tbody></table> <h3 id="key-configuration-instructions-3"><a href="#key-configuration-instructions-3" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t. * from param.BS_SYS_PROFILES t where t.profile_type = 'ACC_MAIL_BILL';</p> <p>select t. *, t.rowid from param.bs_task t where task_code = 'OutBillNotifyTask'; *-223307/30815095/921 *</p> <p>select t. *, t.rowid from PARAM.Bs_Task_Channel t where task_code = 'OutBillNotifyTask';</p> <p>./starttask.sh OutBillNotifyTask 00 -pPHONE_ID = 3165715358 -pCYCLE_ID = 201906 -pCYCLE_TYPE = 1</p> <h2 id="post-paid-number-sms-alert-at-the-end-of-the-month"><a href="#post-paid-number-sms-alert-at-the-end-of-the-month" class="header-anchor">#</a> Post-paid number SMS alert at the end of the month</h2> <h3 id="basic-description-4"><a href="#basic-description-4" class="header-anchor">#</a> Basic description</h3> <p>Post-paid number SMS reminder at the end of the month.</p> <h3 id="business-process-4"><a href="#business-process-4" class="header-anchor">#</a> business process</h3> <p>Process class: EndBillNotifyTask/EndBillNotifyGenerator</p> <p>Scan mailing bill data sheet</p> <ol start="2"><li><p>Check the discount list, and only get the discount on the account, check the product</p></li> <li><p>Three household data, user status between 0 and 10, and MNP_FLAG is not 2</p></li> <li><p>Query the total amount of arrears and total monthly bills to generate SMS</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-4"><a href="#business-table-description-4" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>CEN.AM_MAIL_MAIN_201908</th> <th>Mailing Bill Data Sheet (Scan)</th></tr></thead> <tbody><tr><td>crm1.um_subscriber_921</td> <td>Three household data, user status between 0 and 10</td></tr> <tr><td>party.cm_account</td> <td></td></tr> <tr><td>party.cb_customer</td> <td></td></tr> <tr><td>crm1.um_offer_921</td> <td></td></tr></tbody></table> <h3 id="key-configuration-instructions-4"><a href="#key-configuration-instructions-4" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t. * from param.BS_SYS_PROFILES t where t.profile_type = 'ACC_MAIL_BILL';</p> <p>select t. *, t.rowid from param.bs_task t where task_code = 'EndBillNotifyTask'; *-223307/30815095/921 *</p> <p>select t. *, t.rowid from PARAM.Bs_Task_Channel t where task_code = 'EndBillNotifyTask';</p> <p>./starttask.sh EndBillNotifyTask 00 -pPHONE_ID = 3165715358 -pCYCLE_ID = 201906</p> <h2 id="postpaid-number-mid-month-sms-reminder"><a href="#postpaid-number-mid-month-sms-reminder" class="header-anchor">#</a> Postpaid number Mid-month SMS reminder</h2> <h3 id="basic-description-5"><a href="#basic-description-5" class="header-anchor">#</a> Basic description</h3> <p>Post-paid number Mid-month SMS reminder</p> <h3 id="business-process-5"><a href="#business-process-5" class="header-anchor">#</a> business process</h3> <p>Process class: MiddleBillNotifyTask/MiddleBillNotifyGenerator</p> <p>Scan daily billing table</p> <ol start="2"><li><p>Check the discount list, and only get the discount on the account, check the product</p></li> <li><p>Query the data of the three households, the user status is between 0 and 10, the post-stop is 0 and the MNP_FLAG is not 2</p></li> <li><p>Check to owe the current arrears before sending, the arrears is greater than or equal to the credit, and send more than SMS</p></li> <li><p>Arrears less than credit, send ordinary reminder text</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-5"><a href="#business-table-description-5" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>ad.Ca_Daily_Bill_0921_20190531</th> <th>Daily Billing Table (Scan)</th></tr></thead> <tbody><tr><td>ac1.AM_BILL_ITEM</td> <td>Delinquent Information</td></tr> <tr><td>ac1.AM_ACCT_DEBT_11</td> <td></td></tr> <tr><td>AC1.AM_BALANCE_11</td> <td></td></tr> <tr><td>APS_MDB's real-time billing</td> <td></td></tr> <tr><td>AD.CA_PARA_LIMITSETTING</td> <td>Discount Table</td></tr> <tr><td>crm1.um_subscriber_921</td> <td>Three-family data, user status between 0 and 10, post-paid for all stop positions, and MNP_FLAG is not 2</td></tr> <tr><td>party.cm_account</td> <td></td></tr> <tr><td>party.cb_customer</td> <td></td></tr> <tr><td>crm1.um_offer_921</td> <td></td></tr></tbody></table> <h3 id="key-configuration-instructions-5"><a href="#key-configuration-instructions-5" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t. * from param.BS_SYS_PROFILES t where t.profile_type = 'ACC_MAIL_BILL';</p> <p>select t. *, t.rowid from param.bs_task t where task_code = 'MiddleBillNotifyTask'; *-223307/30815095/921 *</p> <p>select t. *, t.rowid from PARAM.Bs_Task_Channel t where task_code = 'MiddleBillNotifyTask';</p> <p>./starttask.sh MiddleBillNotifyTask 00 -pPHONE_ID = 3105455335 -pBILL_DATE = 20190829</p> <h2 id="reminder-to-use-monthly-fee"><a href="#reminder-to-use-monthly-fee" class="header-anchor">#</a> Reminder to use monthly fee</h2> <h2 id="section-listparagraph"><a href="#section-listparagraph" class="header-anchor">#</a> {#section .ListParagraph}</h2> <h3 id="basic-description-6"><a href="#basic-description-6" class="header-anchor">#</a> Basic description</h3> <p>Reminder to use monthly fee</p> <h3 id="business-process-6"><a href="#business-process-6" class="header-anchor">#</a> business process</h3> <p>Process class: LinerentUsageTask/LinerentUsageGenerator</p> <ol><li><p>Scan the yesterday's billing statement fee minus the previous day's billing statement. Accounts with incremental fees need to be processed</p></li> <li><p>Query the data of the three households, the user status is between 0 and 10, and the post-stop is 0.</p></li> <li><p>Query SMS configuration information and generate SMS</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-6"><a href="#business-table-description-6" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>ad.Ca_Daily_Bill_0921_20190820</th> <th>Daily Billing Table (Scan)</th></tr></thead> <tbody><tr><td>ad.Ca_Usage_Bill_Dtl_0921_20190820</td> <td>Daily Billing Information Details</td></tr> <tr><td>ad.Ca_Rc_Bill_Dtl_0921_20190820</td> <td></td></tr> <tr><td>ad.Ca_Prom_Bill_Dtl_0921_20190820</td> <td></td></tr> <tr><td>crm1.um_subscriber_921</td> <td>Three-family data, user status between 0 and 10, post-paid for all parking spaces 0</td></tr> <tr><td>party.cm_account</td> <td></td></tr> <tr><td>party.cb_customer</td> <td></td></tr> <tr><td>crm1.um_offer_921</td> <td></td></tr></tbody></table> <h3 id="key-configuration-instructions-6"><a href="#key-configuration-instructions-6" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t. * from param.BS_SYS_PROFILES t where t.profile_type = 'ACC_MAIL_BILL';</p> <p>select t. *, t.rowid from param.bs_task t where task_code = 'LinerentUsageTask'; *-223307/30815095/921 *</p> <p>select t. *, t.rowid from PARAM.Bs_Task_Channel t where task_code = 'LinerentUsageTask';</p> <p>./starttask.sh LinerentUsageTask 00 -pPHONE_ID = 3105455335 -pBILL_DATE = 20190831</p> <h2 id="multiple-bill-reminders"><a href="#multiple-bill-reminders" class="header-anchor">#</a> Multiple bill reminders</h2> <h3 id="basic-description-7"><a href="#basic-description-7" class="header-anchor">#</a> Basic description</h3> <p>Clear the ledger in the next cycle after the end of the transfer activity</p> <h3 id="business-process-7"><a href="#business-process-7" class="header-anchor">#</a> business process</h3> <p>Process class: MultipleBillAlertsTask/MultipleBillAlertsGenerator</p> <ol><li><p>Scanned yesterday's billed account</p></li> <li><p>Query the data of the three households, the user status is 0, and the post-payment is 0</p></li> <li><p>Query products, filter the number of products ordered on the day, month and week</p></li> <li><p>Billing fees need to be categorized according to the format of template 15.</p></li> <li><p>For reminders of daily products, the consumption amount is the cost of yesterday minus the cost of the previous day. If the day before yesterday is the previous month, the cost of yesterday is directly used; the daily reminder;</p></li> <li><p>Weekly product reminder, the consumption amount is the yesterday's cost minus the previous 7 days' cost. If the previous 7 days is the previous month, the yesterday's cost is directly used; the weekly 1 reminds the last week's cost;</p></li> <li><p>Reminder of monthly products, the consumption amount is the cost of the previous month; reminder of the cost of the previous month on the 1st of each month;</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-7"><a href="#business-table-description-7" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>ad.Ca_Daily_Bill_0921_20190820</th> <th>Daily Billing Table (Scan)</th></tr></thead> <tbody><tr><td>ad.Ca_Usage_Bill_Dtl_0921_20190820</td> <td>Daily Billing Information Details</td></tr> <tr><td>ad.Ca_Rc_Bill_Dtl_0921_20190820</td> <td></td></tr> <tr><td>ad.Ca_Prom_Bill_Dtl_0921_20190820</td> <td></td></tr> <tr><td>crm1.um_subscriber_921</td> <td>Three-family data, user status is 0, post-paid for all parking spaces</td></tr> <tr><td>party.cm_account</td> <td></td></tr> <tr><td>party.cb_customer</td> <td></td></tr> <tr><td>crm1.um_offer_921</td> <td></td></tr></tbody></table> <h3 id="key-configuration-instructions-7"><a href="#key-configuration-instructions-7" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t.* from param.BS_SYS_PROFILES t where t.profile_type='ACC_MAIL_BILL';</p> <p>select t.<em>,t.rowid from param.bs_task t where task_code = 'MultipleBillAlertsTask';</em>--223307/30815095/921*</p> <p>select t.*,t.rowid from PARAM.Bs_Task_Channel t where task_code = 'MultipleBillAlertsTask';</p> <p>./starttask.sh MultipleBillAlertsTask 00 -pPHONE_ID=3455345114 -pBILL_DATE=20191004</p> <h2 id="no-mailing-address-reminder"><a href="#no-mailing-address-reminder" class="header-anchor">#</a> No mailing address reminder</h2> <h3 id="basic-description-8"><a href="#basic-description-8" class="header-anchor">#</a> Basic description</h3> <p>No mailing address reminder</p> <h3 id="business-process-8"><a href="#business-process-8" class="header-anchor">#</a> business process</h3> <p>Process class: NoEmailAddressTask/NoEmailAddressGenerator</p> <ol><li><p>Scan user mailing address form</p></li> <li><p>Mailing address field is empty number to generate SMS</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-8"><a href="#business-table-description-8" class="header-anchor">#</a> Business table description</h3> <hr> <p>CRM1.um_mail_info_921 User mailing address form (scan cities and regions)</p> <hr> <h3 id="key-configuration-instructions-8"><a href="#key-configuration-instructions-8" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t.* from param.BS_SYS_PROFILES t where t.profile_type='ACC_MAIL_BILL';</p> <p>select t.*,t.rowid from param.bs_task t where task_code = 'NoEmailAddressTask';</p> <p>select t.*,t.rowid from PARAM.Bs_Task_Channel t where task_code = 'NoEmailAddressTask';</p> <p>./starttask.sh NoEmailAddressTask 00 -pCYCLE_ID=201906 -pPHONE_ID=3145656354</p> <h2 id="up-to-call-reminder"><a href="#up-to-call-reminder" class="header-anchor">#</a> Up to call reminder</h2> <h3 id="basic-description-9"><a href="#basic-description-9" class="header-anchor">#</a> Basic description</h3> <p>Reminder up to call</p> <h3 id="business-process-9"><a href="#business-process-9" class="header-anchor">#</a> business process</h3> <p>Process class: TopUsedNumberTask/TopUsedNumberGenerator</p> <p>Scan mailing bill data sheet</p> <ol start="2"><li><p>Query the data of the three households, the user status is between 0 and 10, and the MNP_FLAG is not 2.</p></li> <li><p>Query the paid bill of voice and bill of vpmn, and count the number of peers whose call_type is 0, 2, 3, and 4;</p></li> <li><p>Send SMS</p></li></ol> <h3 id="business-table-description-9"><a href="#business-table-description-9" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>CEN.AM_MAIL_MAIN_201908</th> <th>Mailing Bill Data Sheet (Scan)</th></tr></thead> <tbody><tr><td>crm1.um_subscriber_921</td> <td>user table, postpaid users</td></tr> <tr><td>jf.dr_cs_post_201908</td> <td>Three-family profile, postpaid between user status 0 and 10, and MNP_FLAG is not 2</td></tr> <tr><td>jf.dr_vpmn_pre_201908</td> <td></td></tr></tbody></table> <h3 id="key-configuration-instructions-9"><a href="#key-configuration-instructions-9" class="header-anchor">#</a> Key configuration instructions</h3> <p>*-Parameter configuration *</p> <p>select t.* from param.BS_SYS_PROFILES t where t.profile_type='ACC_MAIL_BILL';</p> <p>select t.<em>,t.rowid from param.bs_task t where task_code = 'TopUsedNumberTask';</em>--223307/30815095/921*</p> <p>select t.*,t.rowid from PARAM.Bs_Task_Channel t where task_code = 'TopUsedNumberTask';</p> <p>./starttask.sh TopUsedNumberTask 00 -pPHONE_ID=3105455335 -pCYCLE_ID=201908</p> <h2 id="bulk-payment-of-arrears"><a href="#bulk-payment-of-arrears" class="header-anchor">#</a> Bulk payment of arrears</h2> <h3 id="basic-description-10"><a href="#basic-description-10" class="header-anchor">#</a> Basic description</h3> <p>Payment of arrears in bulk deposits, prepaid numbers, account cancellation numbers or historical numbers, can be used to deduct historical arrears;</p> <p>The background process does not support historical numbers because there are multiple historical accounts corresponding to historical numbers.</p> <h3 id="business-process-10"><a href="#business-process-10" class="header-anchor">#</a> business process</h3> <p>Process interface: * asset_ITaskCSV_depositToPayOwe *</p> <ol><li><p>Scan the deposit payment arrears background data sheet</p></li> <li><p>Call the * asset_ITaskCSV_depositToPayOwe * interface processing one by one</p></li> <li><p>Check whether the number is a pre-paid number or a cancellation account number. If not, the process is completed;</p></li> <li><p>Check the deposit data corresponding to the number and deposit type. If the deposit amount is 0, the processing is completed;</p></li> <li><p>Check the arrears data of the number. If the arrears are 0, the processing is completed;</p></li> <li><p>There are numbers of deposits and arrears, for deposit arrears business;</p></li> <li><p>Data transfer to deposit payment arrears data history table;</p></li></ol> <h3 id="business-table-description-10"><a href="#business-table-description-10" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>CEN.AM_BATCH_DEPOSIT_TOPAY</th> <th>Deposit payment arrears data sheet</th></tr></thead> <tbody><tr><td>Ac1.am_deposit</td> <td>Deposit Table</td></tr> <tr><td>ac1.AM_BILL_ITEM</td> <td>Delinquent Information</td></tr> <tr><td>ac1.AM_ACCT_DEBT_11</td> <td></td></tr> <tr><td>AC1.AM_BALANCE_11</td> <td></td></tr> <tr><td>APS_MDB's real-time billing</td> <td></td></tr> <tr><td>Ac1.am_deposit_busi</td> <td>Deposit Business Log Form</td></tr> <tr><td>Ac1.am_busi</td> <td>Treasury Business Record Form</td></tr> <tr><td>Ac1.am_writeoff</td> <td>Reversal Log Table</td></tr></tbody></table> <h3 id="key-configuration-instructions-10"><a href="#key-configuration-instructions-10" class="header-anchor">#</a> Key configuration instructions</h3> <p>select t. *, rowid from param.bs_work_order_conf T where ORDER_CODE = 'BatchDepositToPayOwe'; *-asset_ITaskCSV_depositToPayOwe *</p> <p>select t. *, rowid from param.bs_work_order_channel T where ORDER_CODE = 'BatchDepositToPayOwe';</p> <h2 id="bulk-refund-deposit"><a href="#bulk-refund-deposit" class="header-anchor">#</a> Bulk refund deposit</h2> <h3 id="basic-description-11"><a href="#basic-description-11" class="header-anchor">#</a> Basic description</h3> <p>Payment of arrears in bulk deposits, prepaid numbers, account cancellation numbers or historical numbers, can be used to deduct historical arrears;</p> <p>The background process does not support historical numbers because there are multiple historical accounts corresponding to historical numbers.</p> <h3 id="business-process-11"><a href="#business-process-11" class="header-anchor">#</a> business process</h3> <p>Process interface: * asset_ITaskCSV_depositRefund *</p> <ol><li><p>Scan the background data of the batch refund deposit</p></li> <li><p>Call the * asset_ITaskCSV_depositRefund * interface processing one by one</p></li> <li><p>Check whether the number is a pre-paid number or a cancellation account number. If not, the process is completed;</p></li> <li><p>Check the deposit data corresponding to the number and deposit type. If the deposit amount is 0, the processing is completed;</p></li> <li><p>Check the arrears data of the number, and calculate the refundable amount = total deposit-total arrears</p></li> <li><p>There is a deposit number for the deposit refund business;</p></li> <li><p>The data is transferred to the batch refund deposit data history table;</p></li></ol> <h3 id="business-table-description-11"><a href="#business-table-description-11" class="header-anchor">#</a> Business table description</h3> <table><thead><tr><th>CEN.AM_BATCH_DEPOSIT_REFUND</th> <th>Bulk refund deposit data sheet</th></tr></thead> <tbody><tr><td>Ac1.am_deposit</td> <td>Deposit Table</td></tr> <tr><td>ac1.AM_BILL_ITEM</td> <td>Delinquent Information</td></tr> <tr><td>ac1.AM_ACCT_DEBT_11</td> <td></td></tr> <tr><td>AC1.AM_BALANCE_11</td> <td></td></tr> <tr><td>APS_MDB's real-time billing</td> <td></td></tr> <tr><td>Ac1.am_deposit_busi</td> <td>Deposit Business Log Form</td></tr></tbody></table> <h3 id="key-configuration-instructions-11"><a href="#key-configuration-instructions-11" class="header-anchor">#</a> Key configuration instructions</h3> <p>select t. *, rowid from param.bs_work_order_conf T where ORDER_CODE = 'BatchDepositRefund'; *-asset_ITaskCSV_depositRefund *</p> <p>select t. *, rowid from param.bs_work_order_channel T where ORDER_CODE = 'BatchDepositRefund';</p> <h2 id="ntn-refund-deposit"><a href="#ntn-refund-deposit" class="header-anchor">#</a> NTN refund deposit</h2> <h3 id="basic-description-12"><a href="#basic-description-12" class="header-anchor">#</a> Basic description</h3> <p>For NTN Group member number refund deposits, it is necessary to consider that the arrears of the entire NTN Group cannot exceed the amount of the ledger + remaining deposit;</p> <h3 id="business-process-12"><a href="#business-process-12" class="header-anchor">#</a> business process</h3> <p>Process interface: * asset_IDepositCSV_depositRefundTask *</p> <ol><li><p>Scan NTN refund deposit task list</p></li> <li><p>Call the * asset_IDepositCSV_depositRefundTask * interface processing one by one</p></li> <li><p>Query the NTN bill arrears query task list, if there is a recent 30-minute (configurable) ntn arrears information query;</p></li> <li><p>If there is no record, add an NTN bill arrears inquiry task, record the associated task number, and the scan is completed;</p></li> <li><p>Follow-up scans the associated tasks to see if the status is complete, and if so, proceed to the next step;</p></li> <li><p>Query the NTN bill arrears inquiry task schedule to return the deposit one by one to ensure that the remaining deposit of each number + the account is greater than the arrears, while ensuring that the remaining deposit of the entire group + the account is greater than the arrears, and record the business table;</p></li> <li><p>The data is transferred to the batch refund deposit data history table;</p></li></ol> <h3 id="business-table-description-12"><a href="#business-table-description-12" class="header-anchor">#</a> Business table description</h3> <p>CEN.AM_NTN_DEPOSIT_TASK | NTN Refund Deposit Task List |</p> <table><thead><tr><th>CEN.AM_NTN_DEPOSIT_TASK_DETAIL</th> <th></th></tr></thead> <tbody><tr><td>CEN.AM_NTN_TASK</td> <td>NTN Billing Inquiry Task List</td></tr> <tr><td>CEN.AM_NTN_TASK_DETAILS</td> <td></td></tr> <tr><td>party.cb_enterprise</td> <td>NTN Group Tables</td></tr> <tr><td>party.cb_enterprise_dept party.cb_enterprise_mem</td> <td>NTN Department Table</td></tr> <tr><td></td> <td>NTN Member List</td></tr> <tr><td>Ac1.am_deposit</td> <td>Deposit Table</td></tr> <tr><td>ac1.AM_BILL_ITEM</td> <td>Delinquent Information</td></tr> <tr><td>ac1.AM_ACCT_DEBT_11</td> <td></td></tr> <tr><td>AC1.AM_BALANCE_11</td> <td></td></tr> <tr><td>APS_MDB's real-time billing</td> <td></td></tr> <tr><td>Ac1.am_deposit_busi</td> <td>Deposit Business Log Form</td></tr></tbody></table> <h3 id="key-configuration-instructions-12"><a href="#key-configuration-instructions-12" class="header-anchor">#</a> Key configuration instructions</h3> <ul><li>------ NTN refund deposit *</li></ul> <p>select t. *, t.rowid from param.bs_work_order_conf t where t.order_code = 'NTN_DEPOSIT_REFUND_TASK'; *-asset_IDepositCSV_depositRefundTask *</p> <p>select t. *, t.rowid from param.BS_WORK_ORDER_CHANNEL t where t.order_code = 'NTN_DEPOSIT_REFUND_TASK';</p> <ul><li>------- NTN arrears inquiry *</li></ul> <p>select t.<em>,t.rowid from param.bs_work_order_conf t where t.order_code = 'NTN_BILL_QUERY_TASK%';</em>--asset_ITaskCSV_ntnBillQuery*</p> <p>select t.*,t.rowid from param.BS_WORK_ORDER_CHANNEL t where t.order_code = 'NTN_BILL_QUERY_TASK%';</p> <h1 id="_1-employee-payment"><a href="#_1-employee-payment" class="header-anchor">#</a> 1. Employee payment</h1> <div class="language- extra-class"><pre><code>1.  ## basic description
</code></pre></div><p>Employee payment refers to recharging or extending the validity period of Cmpak employees.</p> <h2 id="business-process-13"><a href="#business-process-13" class="header-anchor">#</a> business process</h2> <ol><li><p>Corresponding service asset_ITaskCSV_empBatchPay</p></li> <li><p>Obtain the payment record data of the last 3 days from the batch payment record table，sql is as follows:</p> <p>SELECT A.*, A.ROWID FROM AM_BATCH_PAYMENT A,AM_BATCH_IMPORT B WHERE A.PARTITION_ID IN (:TODAY, :YESTERDAY, :PRE_DAY) AND A.BATCH_ID = B.BATCH_ID AND A.DEAL_FLAG = 'U' AND A.TRADE_TYPE_CODE = 9527 AND B.ACT_FLAG IN ('U','R')</p></li> <li><p>Circulate the records obtained, the specific logic is as follows</p></li> <li><p>Determine whether the employee has paid the fee, skip if the fee has been paid, and pay the fee if not
Select t.*,t.rowid from cmpk_cen.am_emp_batch_pay_rec_201910 t where t.emp_id=3291;</p></li> <li><p>Query the three households, complete the business information, and call the prepaid recharge interface for payment</p></li> <li><p>Successfully update the successful status, backfill the bill for payment, fail to update the reason and status
3.  ## Business table description</p> <ol start="4"><li><h2 id="key-configuration-instructions-13"><a href="#key-configuration-instructions-13" class="header-anchor">#</a> Key configuration instructions</h2></li></ol></li></ol> <p>+--------------------------------------------------------------------------------------+
| select * from param.bs_work_order_conf t where t.order_code='EmpBatchPay';    |
|                                                                                      |
| select * from param.bs_work_order_channel t where t.order_code='EmpBatchPay'; |
+--------------------------------------------------------------------------------------+</p> <ol start="2"><li><h1 id="repayment"><a href="#repayment" class="header-anchor">#</a> Repayment</h1> <ol><li><h2 id="basic-description-13"><a href="#basic-description-13" class="header-anchor">#</a> basic description</h2></li></ol></li></ol> <p>The repayment task is to perform repayment operations on the records that have been borrowed.</p> <h2 id="business-process-14"><a href="#business-process-14" class="header-anchor">#</a> business process</h2> <ol><li><p>Corresponding service asset_IAdvanceLoanCSV_repaymentAdvance</p></li> <li><p>Obtain the payment record data of the last 3 days from the payment reminder table, and the SQL is as follows:</p> <p>select so_nbr,PARTITION_ID,busi_type,region_code,acct_id,phone_id,recv_cash,tax,bill_type,pay_date,ret_so_nbr,ret_pay_date,flag,9805 trade_op_id,90000000 trade_org_id,921 trade_county_code,921 trade_region_id,ROWID from am_recharge_advance_notify where flag=0 and PARTITION_ID IN (:TODAY, :YESTERDAY, :PRE_DAY)</p></li> <li><p>Cyclically process the acquired records, the specific logic is as follows</p></li> <li><p>Determine whether there is a loan record for this number, if there is no direct transfer history table, if there is a repayment, query whether there is an interface sql:</p></li></ol> <p>select t.*,rowid from ac8.am_adv_loan_dtl t where t.phone_id='3130518036';</p> <ol start="5"><li><p>Determine whether the payment balance is greater than the repayment amount, if it is less than the transfer history table, if it is greater than the deduction</p></li> <li><p>If successful, move the history table and record the repayment work order; if failed, update the record status to 3</p> <p>History table name:</p></li></ol> <p>--Repayment history of the new system</p> <p>select t.*,rowid from ac8.AM_ADV_LOAN_DTL_HIS_201909 t where t.phone_id='3143352672';</p> <p>--Loan repayment record form</p> <p>select t.*,rowid from ac8.AM_ADV_LOAN_DTL_PUSH_201909 t where t.phone_id='3143352672';</p> <ol start="3"><li><h2 id="business-table-description-13"><a href="#business-table-description-13" class="header-anchor">#</a> Business table description</h2></li> <li><h2 id="key-configuration-instructions-14"><a href="#key-configuration-instructions-14" class="header-anchor">#</a> Key configuration instructions</h2></li></ol> <p>+-------------------------------------------------------------------------------------------------+
| select * from param.bs_work_order_conf t where t.order_code='AdvanceLoanTask';           |
|                                                                                                 |
| select * from param.bs_work_order_channel t where t.order_code='AdvanceLoanTask';        |
|                                                                                                 |
| --Old system loan and repayment table                                                                      |
|                                                                                                 |
| select * from ac8.AM_AUTOLOAD t;                                                              |
|                                                                                                 |
| --New system loan table                                                                               |
|                                                                                                 |
| select t.<em>,rowid from ac8.am_adv_loan_dtl t where t.phone_id='3130518036';               |
|                                                                                                 |
| --Repayment history of the new system                                                                         |
|                                                                                                 |
| select t.</em>,rowid from ac8.AM_ADV_LOAN_DTL_HIS_201909 t where t.phone_id='3143352672';  |
|                                                                                                 |
| --Loan repayment record form                                                                                 |
|                                                                                                 |
| select t.*,rowid from ac8.AM_ADV_LOAN_DTL_PUSH_201909 t where t.phone_id='3143352672'; |
+-------------------------------------------------------------------------------------------------+</p> <ol start="3"><li><h1 id="debit"><a href="#debit" class="header-anchor">#</a> Debit</h1> <ol start="5"><li><h2 id="post-bill-task"><a href="#post-bill-task" class="header-anchor">#</a> Post Bill Task</h2> <ol><li><h3 id="basic-description-14"><a href="#basic-description-14" class="header-anchor">#</a> basic description</h3></li></ol></li></ol></li></ol> <p>Mailing bills refers to the process of issuing customized bills to customers through corresponding channels according to the customer's customized bill types, such as electronic, SMS, MMS, mail, paper, etc.</p> <p>Post bill refers to the process of sending customized bills to customers through corresponding channels according to their customized bill types, such as electronic, SMS, MMS, mail, paper, etc.</p> <h4 id="configuration-parameter"><a href="#configuration-parameter" class="header-anchor">#</a> Configuration Parameter</h4> <p>select * from cmpk_param.bs_sys_profiles t where t.profile_type='ACC_MAIL_BILL';--出账用到的参数</p> <p>select * from cmpk_param.bs_sys_profiles t where t.profile_type='ACC_TXT_BILL'; --txt账单用到的参数</p> <p>select * from cmpk_param.bs_sys_profiles t where t.profile_type='SEND_EMAIL'; --发送邮件用到的参数</p> <p>select * from cmpk_param.bs_static t where t.type_id='CORP_BILL_PLAN_GROUP'; --集团pdf用到的参数</p> <p>// Discount definition
// Monthly rental discount: RENT_DISC is defined in this configuration parameter DISCOUNT_ITEM
// Discount account for monthly rental discount: For example, the account of 80503004 is defined to the DISCOUNT_ITEM_RENT_DISC configuration parameter.
// [XXX] Discount: [XXX] defined in this configuration parameter DISCOUNT_ITEM The result is RENT_DISC, [XXX]
// [XXX] discount discount account: for example [dddddddd] this account is defined to DISCOUNT_ITEM_ [XXX] in the configuration parameters other similar
String discountItem=configParamMap.get(&quot;DISCOUNT_ITEM&quot;);</p> <p>Example: then 80503004 is the subject of monthly rent discount</p> <p>18 ACC_MAIL_BILL DISCOUNT_ITEM RENT_DISC ZZZZ Definition of discount account type</p> <p>19 ACC_MAIL_BILL DISCOUNT_ITEM_RENT_DISC 80503004 ZZZZ Monthly rental discount account definition</p> <h4 id="used-table"><a href="#used-table" class="header-anchor">#</a> Used table</h4> <p>The role of the various tables used for accounting</p> <hr> <p>账单费用:<br>
AC.am_bill_ar_yyyyMM           Original data of outgoing expenses
AC.am_abill_06                  By account, paid account, account summary Account-level fees (including on-demand payments)
AC.am_sbill_06                  Summarize by account, paid account, user, account, product id User-level fees (including on-demand fees)
AC.am_a2sbill_06                Summary by account, paid account, user, account
AC.am_s2abill_06                By account, paid account, user, account summary
AC.am_bqs_06                    User-level cost information summary
AC.am_bqa_06                    Summary of account-level fee information
cen.am_mail_main_201906        Number billing level information
cen.am_mail_main_aux_201906   Number billing level information
cen.AM_VPN_SUMMARY              Group business record data precipitation table
cen.am_billing_number_list     txt billing number status table
cen.AM_VPN_BILL_201906         Group Statement
cen.AM_VPN_BILL_DTL_201906    Group Bill Expansion Table
日志:<br>
cen.am_mail_main_log_2019     Personal billing data generation log (only error information is recorded)
ac.am_mail_log_2019            txt bill file generation log (record all information)
ac.am_email_log_2019           ebill bill file generation log (record all information)
ac.am_dmail_log_2019          dup bill file generation log (record all information)
cen.AM_VPN_BILL_LOG_201906    Group bill data generation log (only error information is recorded)
cen.am_ntn_mail_log            Group data generation log (only error messages are recorded)
单个号码生成<br>
cen.am_single_phone_2019       Personal bill generation and group bill data regeneration configuration table (primary key user, month, step)
cen.am_single_group_2019       Group bill file regenerate configuration table (primary key is group number, type, month)
配置<br>
param.am_bill_itemcomp          Bill format configuration</p> <hr> <p>Key tables used in business:</p> <hr> <p>AD.CA_DISCOUNT_REC_201906 discount data
AC.AM_BALANCE_06 month-end account balance at the end of the previous month
AC.AM_BUSI payment record table query by PARTITION_ID
AC.AM_ACCT_DEBT_06 Monthly arrears at the end of the previous month
Crm1.um_mail_info_921 Mailing billing information
Crm1.um_mail_info_his_921_201906 mailing bill information history table
Crm1.UM_OFFER_921 offer table
Crm1.UM_OFFER_HIS_921_201906 offer history table
jf.dr_cs_post_20190508 Postpaid voice
jf.dr_ps_post_20190508 Postpaid traffic
jf.dr_ismp_post_20190508 Postpaid MMS
jf.dr_sms_post_20190508 Post-paid SMS
jf.dr_vpmn_post_20190508 postpaid vpmn
jf.dr_cs_stat_post_new_201910 Postpaid voice detailed bill statistics
jf.dr_sms_stat_post_new_201910 Detailed statistics of postpaid SMS
jf.dr_ismp_stat_post_new_201910 Post-paid MMS detailed bill statistics
jf.dr_ps_stat_post_new_201910 Detailed statistics of postpaid traffic
jf.dr_vpmn_stat_post_new_201910 Postpaid vpmn detailed bill statistics
jf.dr_cs_max_dailed_new_201910 Statistics of the maximum number of postpaid calls
crm1.um_price_plan_921 Product tariff example
upc.pm_offer Offer definition table
party.cb_enterprise NTN table
party.cb_enterprise_log NTN history table
party.cb_enterprise_dept DEPT table
party.cb_enterprise_dept_log DEPT history table
party.cb_enterprise_mem NTN member table
party.cb_enterprise_mem_log NTN member history table
List of sensitive numbers in cp.UM_SUBS_CONFIDENTIAL NTN
qd.bboss_city_county county_code
stat.CM_CUSTOMER_LEDGER_REPORT payment record statistics table
ad.ca_ext_data_his_0921_201906 Account region_id sub-table Use this table for external expenses in December 2019
ac1.i_fee_cen_201912 Accounts for external expenses after January 2019 (because remark has records) To be discussed
cen.AM_FREERES_MON_06 Periodic free resources
cen.AM_OT_FREERES_MON_06 One-time free resources</p> <hr> <h4 id="called-interface"><a href="#called-interface" class="header-anchor">#</a> Called interface</h4> <p>Deposit: asset_IDepositCSV_queryDeposit</p> <p>Three households: order.IQueryScaInfosCSV.queryScaInfosBySubsInsId</p> <p>Fixed number and mobile phone number query: order.IUmSubscriberCSV.qryFllGsmMap</p> <p>Obtain the name of the operator who changed the VPMN through the member user number: order.IVpmnInfoQryCSV.getVpmnNameForMeb</p> <p>The sequence of each table:</p> <p>cen.am_mail_main_aux_201906: SEQ_MAIL_BILL_ID</p> <p>cen.am_mail_main_201906: SEQ_MAIL_BILL_ID</p> <p>cen.AM_VPN_BILL_201906: SEQ_VPN_BILL_ID</p> <p>cen.AM_VPN_BILL_DTL_201906: SEQ_VPN_BILL_ID</p> <h4 id="stored-procedure"><a href="#stored-procedure" class="header-anchor">#</a> Stored procedure</h4> <p>Package tariff: get_plan_info_new</p> <p>Stored process of running detailed order statistics</p> <h3 id="introduction-to-single-number-generation"><a href="#introduction-to-single-number-generation" class="header-anchor">#</a> Introduction to Single Number Generation</h3> <p>Select * from cen.am_single_phone_2019;</p> <p>cen.am_single_phone_2019</p> <p>Step to control the re-run txt, ebill, dup, and vpn data</p> <ol><li><p>MAIN_MAIN 2. TXT text 3. Duplicate PDF 4. Ebill Pdf 5. VPN DTL, 6 bill reissue</p> <p>If it is 1, the data of which process is generated whichever process is run first</p> <p>If it is 2, regenerate txt</p> <p>If it is 3, regenerate the DUP</p> <p>If it is 4, regenerate EBill</p> <p>If it is 5, regenerate VPN DATA</p> <p>If it is 6, the bill ebill is reissued</p> <p>Select * from cen.am_single_group_2019;</p> <p>cen.am_single_group_2019</p> <p>Use ntn_flag to control which billing group type is generated id type</p> <p>1NTN_ID 2DEPT_ID 3CUST_NAME</p> <p>If it is 1, regenerate NTN_ID</p> <p>If it is 2, regenerate DEPT_ID</p> <p>If it is 3, regenerate CUST_NAME</p> <p>Log directory: here will output all the ERROR directory to this directory</p> <p>/home/aifet/asset_bidui/data/postBillLog/201906</p> <ol start="3"><li><h3 id="business-process-15"><a href="#business-process-15" class="header-anchor">#</a> business process</h3></li></ol></li></ol> <p>! [] (media/image2.png)</p> <ol start="5"><li><h4 id="clean-acount-user-bill"><a href="#clean-acount-user-bill" class="header-anchor">#</a> Clean Acount &amp; User bill</h4> <ol><li><h5 id="description-description"><a href="#description-description" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Delete the billing intermediate table AM_ABILL/AM_SBILL/AM_A2SBILL/AM_S2ABILL</p> <h5 id="process-process"><a href="#process-process" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncateMonthBillInDBTask</p> <p>mission details:</p> <p>Clear the AM_ABILL/AM_SBILL/AM_A2SBILL/AM_S2ABILL tables of the current month's partitions in 8 libraries</p> <ol start="6"><li><h4 id="gen-account-user-bill"><a href="#gen-account-user-bill" class="header-anchor">#</a> Gen Account &amp; User Bill</h4> <ol start="3"><li><h5 id="description-description-2"><a href="#description-description-2" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Split the billing table into four parts according to account, user, user payment, and account payment.</p> <p>The billing table is divided into four parts: account, user, user pay-on-behalf and account pay-on-behalf.</p> <h5 id="process-process-2"><a href="#process-process-2" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.billimage.MonthBillInDBTask</p> <p>mission details:</p> <ol><li><p>AM_ABILL (Account-level billing account details summary), AM_A2SBILL (Account-level billing account details summary)</p></li> <li><p>According to user id table AM_SBILL (summary of user-level billing accounts and OFFER details), AM_S2ABILL (summary of user-level billing accounts and OFFER details)</p> <ol start="7"><li><h4 id="clean-user-sum-bill"><a href="#clean-user-sum-bill" class="header-anchor">#</a> Clean User Sum Bill</h4> <ol start="5"><li><h5 id="description-description-3"><a href="#description-description-3" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clean up AM_BQS (User Level Bill Summary Table)</p> <h5 id="process-process-3"><a href="#process-process-3" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncateUserBillInfoTask</p> <p>mission details:</p> <p>Clean up AM_BQS (User Level Bill Summary Table)</p> <ol start="8"><li><h4 id="gen-user-sum-bill"><a href="#gen-user-sum-bill" class="header-anchor">#</a> Gen User Sum bill</h4> <ol start="7"><li><h5 id="description-description-4"><a href="#description-description-4" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Summarize user-level expenses, payment by others, bill-level discounts and other information to a table AM_BQS.</p> <p>Summarize user level fee, Paid by Others, acctount discount into one table.</p> <h5 id="process-process-4"><a href="#process-process-4" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.billimage.UserBillInfoTask</p> <p>mission details:</p> <ol><li><p>Obtain user-level billing information and proxy fees from AM_SBILL (summary of user-level billing accounts and OFFER details), AM_S2ABILL (summary of user-level billing accounts and OFFER details)</p></li> <li><p>Obtain bill-level discount fees from the account</p> <ol start="9"><li><h4 id="clean-account-sum-biil"><a href="#clean-account-sum-biil" class="header-anchor">#</a> Clean Account Sum BiIl</h4> <ol start="9"><li><h5 id="description-description-5"><a href="#description-description-5" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clean up AM_BQA (Account Level Bill Summary Table)</p> <h5 id="process-process-5"><a href="#process-process-5" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncateAcctBillInfoTask</p> <p>mission details:</p> <p>Clean up AM_BQA (Account Level Bill Summary Table)</p> <ol start="10"><li><h4 id="gen-account-sum-bill"><a href="#gen-account-sum-bill" class="header-anchor">#</a> Gen Account Sum BIll</h4> <ol start="11"><li><h5 id="description-description-6"><a href="#description-description-6" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Summarize account-level expenses, pay on behalf of others, balance, arrears, capital income, expense details and other information to a table AM_BQA.</p> <p>Summarize account level fee, paid to others, balance, owe fee, asset income, fee details into one table.</p> <h5 id="process-process-6"><a href="#process-process-6" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.billimage.MonthBillInDBTask</p> <p>mission details:</p> <ol><li><p>Obtain account-level fee information from AM_ABILL (account-level billing account detail summary), AM_A2SBILL (account-level billing account detail summary)</p></li> <li><p>Get account balance and arrears information</p></li> <li><p>Obtain the total payment amount and last payment date of last month</p> <ol start="11"><li><h4 id="clean-invoice-data"><a href="#clean-invoice-data" class="header-anchor">#</a> Clean Invoice Data</h4> <ol start="13"><li><h5 id="description-description-7"><a href="#description-description-7" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clean up AM_MAIL_MAIN_YYYYMM/AM_MAIL_MAIN_AUX_YYYYMM,</p> <p>AM_MAIL_MAIN_LOG_YYYY, AM_SINGLE_PHONE_YYYY STEP in (1,2,3,4)</p> <h5 id="process-process-7"><a href="#process-process-7" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncateAcctBillInfoTask</p> <p>mission details:</p> <p>Clean up AM_MAIL_MAIN_YYYYMM/AM_MAIL_MAIN_AUX_YYYYMM,</p> <p>AM_MAIL_MAIN_LOG_YYYY, AM_SINGLE_PHONE_YYYY STEP in (1,2,3,4)</p> <ol start="12"><li><h4 id="gen-invoice-data"><a href="#gen-invoice-data" class="header-anchor">#</a> Gen Invoice Data</h4> <ol start="15"><li><h5 id="description-description-8"><a href="#description-description-8" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Generate the final bill file data according to the user and generate AM_MAIL_MAIN_YYYYMM /</p> <p>AM_MAIL_MAIN_AUX_YYYYMM/AM_MAIL_MAIN_LOG_YYYY</p> <h5 id="process-process-8"><a href="#process-process-8" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.cmpk.PerNumberTask</p> <p>mission details:</p> <ol><li><p>Get the query data from AM_BQS, traverse the data for processing</p></li> <li><p>Query mailing information, account-level fee AM_BQA, query deposit information, main product</p></li> <li><p>If the mailing information does not exist, the program will automatically fill in a piece of data, the note is sys create YYYYMM</p></li> <li><p>The template found through the script BILL_FORMAT_ID parameter summarizes the billing expenses, and recalculates the billing expenses and detailed billing expenses through the bill configuration</p></li> <li><p>Use the MONTH_BILL_FORMAT_ID and EXT_DATA_FORMAT_ID parameters to format the new version of the bill fee and the old version of the external fee</p></li> <li><p>Call the stored procedure to obtain the package billing price information</p> <ol start="13"><li><h4 id="clean-txt-file-log"><a href="#clean-txt-file-log" class="header-anchor">#</a> Clean txt file log</h4> <ol start="17"><li><h5 id="description-description-9"><a href="#description-description-9" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clean up mailing bills am_mail_log_ logs, clear am_single_phone_yyyy step = 2</p> <h5 id="process-process-9"><a href="#process-process-9" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncatePerNumberTxtTask</p> <p>mission details:</p> <p>Clean up mailing bills am_mail_log_ logs, clear am_single_phone_yyyy step = 2</p> <ol start="14"><li><h4 id="gen-invoice-file"><a href="#gen-invoice-file" class="header-anchor">#</a> Gen Invoice File</h4> <ol start="19"><li><h5 id="description-description-10"><a href="#description-description-10" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Generate mailing bill TXT, generate log log</p> <h5 id="process-process-10"><a href="#process-process-10" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.pdf.TxtBillTask</p> <p>mission details:</p> <ol><li><p>Get the queried data from AM_MAIL_MAIN_YYYYMM, traverse the data for processing</p></li> <li><p>Check mailing information, external fees, free resources, payment statistics, detailed bill information</p></li> <li><p>Use the script OLD_FLAG = 1 to determine whether to generate old or new bills</p></li> <li><p>The generated bill file is distributed on 4 hosts according to the account modulus, and the rules are configured through the channel</p></li> <li><p>No account file will be generated after the account is cancelled for more than one month, and the log record will be recorded successfully DETAIL_FLAGE will be recorded in E</p></li> <li><p>If the bill amount is less than Rs.5, the bill file is not generated, and the log record is recorded successfully DETAIL_FLAGE is recorded N</p></li> <li><p>According to DETAIL_FLAG to determine whether to generate a detailed list, 0 and 3 are not generated, 1 calling, 2 called</p> <ol start="15"><li><h4 id="collect-txt-invoices"><a href="#collect-txt-invoices" class="header-anchor">#</a> Collect txt invoices</h4> <ol start="21"><li><h5 id="description-description-11"><a href="#description-description-11" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Merging TXT bills to the same FTP host</p> <h5 id="process-process-11"><a href="#process-process-11" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.collect.CollectTxtBillTask</p> <p>mission details:</p> <p>Send the files in the/data01/acttask/data/postBill/201912/TXT/directory to the 14 host/data02/acttask/data/dolist/201912 directory, if successful, back up to/data01/acttask/data/postBill_FINAL/201912 /TXT/</p> <ol start="16"><li><h4 id="check-invoice-data-missing"><a href="#check-invoice-data-missing" class="header-anchor">#</a> Check Invoice Data missing</h4> <ol start="23"><li><h5 id="description-description-12"><a href="#description-description-12" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Check the AM_MAIL_MAIN_AUX table to see if there is any missing AM_BILL_AR, if there is any missing, generate am_single_phone_yyyy step = 1</p> <h5 id="process-process-12"><a href="#process-process-12" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.checkdata.CheckPerNumberDataTask</p> <p>mission details:</p> <ol><li><p>Calculate the number of users in the AM_MAIL_MAIN_AUX and AM_BILL_AR tables. If they are equal, it means that no data supplement is required. If they are not equal, if the number of differences is equal to the number of the AM_MAIL_MAIN_LOG_2019 table in the current month, the supplementary data is recorded through this error log. Then the data is supplemented by the difference data of the two tables, and the AM_BILL_AR table uses the data of the statistical library. The data that needs to be generated is placed in the am_single_phone_yyyy table, and STEP = 1</p></li> <li><p>Send the statistical results to relevant personnel by SMS.</p> <ol start="17"><li><h4 id="check-invoice-file-missing"><a href="#check-invoice-file-missing" class="header-anchor">#</a> Check Invoice File missing</h4> <ol start="25"><li><h5 id="description-description-13"><a href="#description-description-13" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Check the number of the ungenerated text bill and record it in the am_single_phone_yyyy table step = 2</p> <h5 id="process-process-13"><a href="#process-process-13" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.checkdata.CheckTxtBillTask</p> <p>mission details:</p> <ol><li><p>Calculate the number of AM_MAIL_MAIN_AUX and the number of successful users in the am_mail_log_YYYY table. If they are equal, it means that the data need not be supplemented. If they are not equal, if the number of differences is equal to the number of errors in the month of the am_mail_log_YYYY table, supplement the data through this error log. Not equal, the data is supplemented by the difference data of the two tables. The am_mail_log_YYYY table uses the data of the statistical library. The data that needs to be supplemented is placed in the am_single_phone_yyyy table, and STEP = 2</p></li> <li><p>Send the statistical results to relevant personnel by SMS.</p> <ol start="18"><li><h4 id="send-mail-notify"><a href="#send-mail-notify" class="header-anchor">#</a> Send Mail Notify</h4> <ol start="27"><li><h5 id="description-description-14"><a href="#description-description-14" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Write the number and plan info of the generated text bill to the CEN.AM_BILLING_NUMBER_LIST table and send an email to remind you to check</p> <h5 id="process-process-14"><a href="#process-process-14" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.collect.SendTxtMailTask</p> <p>mission details:</p> <ol><li><p>am_mail_main_YYYYMM generates CEN.AM_BILLING_NUMBER_LIST table records</p></li> <li><p>Send an email to inform the customer and the PSO TXT bill generation is complete, you can check the bill.</p> <ol start="19"><li><h4 id="regenerate-txt-file"><a href="#regenerate-txt-file" class="header-anchor">#</a> Regenerate Txt file</h4> <ol start="29"><li><h5 id="description-description-15"><a href="#description-description-15" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Regenerate missing Txt bills</p> <h5 id="process-process-15"><a href="#process-process-15" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.single.SinglePhoneBillTask</p> <p>mission details:</p> <ol><li><p>Query the data of STEP equal to 1 and 2 in the am_single_phone_yyyy table</p></li> <li><p>Complete the information of the three households, delete the data of the original table and regenerate AM_BQA_12, AM_BQS_12</p> <p>AM_MAIL_MAIN_201912, AM_MAIL_MAIN_AUX_201912, AM_MAIL_MAIN_LOG_2019, AC1.AM_MAIL_LOG_2019, regenerate the txt bill file, and modify the status of AM_SINGLE_PHONE, execution results and execution time.</p> <ol start="20"><li><h4 id="clean-dmail-log"><a href="#clean-dmail-log" class="header-anchor">#</a> Clean dmail_log</h4> <ol start="31"><li><h5 id="description-description-16"><a href="#description-description-16" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clear the data of step = 3 in the am_dmail_log_log and am_single_phone_yyyy table of mailing bills</p> <h5 id="process-process-16"><a href="#process-process-16" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncatePerNumberDupTask</p> <p>mission details:</p> <p>Clear the data of step = 3 in the am_dmail_log_log and am_single_phone_yyyy table of mailing bills</p> <ol start="21"><li><h4 id="gen-dupbill-pdf"><a href="#gen-dupbill-pdf" class="header-anchor">#</a> Gen DupBIll PDF</h4> <ol start="33"><li><h5 id="description-description-17"><a href="#description-description-17" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Generate Duplicate PDF, generate log log</p> <h5 id="process-process-17"><a href="#process-process-17" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.pdf.SendEmailDupTask</p> <p>mission details:</p> <ol><li><p>Get the queried data from AM_MAIL_MAIN_YYYYMM, traverse the data for processing</p></li> <li><p>Check mailing information, external fees, free resources, payment statistics, detailed bill information</p></li> <li><p>Use the main package to determine which bill to generate (GMS, PRI, FIX_LINE)</p></li> <li><p>The generated bill file is distributed directly under/data01/acttask/data/postBill_FINAL/201912/DUP directory of 4 hosts according to the account modulus</p></li> <li><p>All users must generate DUP bills and detailed bills</p> <ol start="22"><li><h4 id="check-invoice-file-missing-2"><a href="#check-invoice-file-missing-2" class="header-anchor">#</a> Check Invoice File missing</h4> <ol start="35"><li><h5 id="description-description-18"><a href="#description-description-18" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Check that the number of the Duplicate PDF bill not generated is recorded in the am_single_phone_yyyy table step = 3</p> <h5 id="process-process-18"><a href="#process-process-18" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.checkdata.CheckDupPdfTask</p> <p>mission details:</p> <ol><li><p>Calculate the number of AM_MAIL_MAIN_AUX and the number of successful users in the am_dmail_log_YYYY table. If they are equal, it means that no additional data is required. If they are not equal, if the number of differences is equal to the number of errors in the month of the am_dmail_log_YYYY table, the supplementary data is recorded through this error log Not equal, the data is supplemented by the difference data of the two tables. The am_dmail_log_YYYY table uses the data of the statistical library. The data that needs to be supplemented is placed in the am_single_phone_yyyy table, and STEP = 3</p></li> <li><p>Send the statistical results to relevant personnel by SMS.</p> <ol start="23"><li><h4 id="regerate-single-number-dup-pdf"><a href="#regerate-single-number-dup-pdf" class="header-anchor">#</a> Regerate single number DUP PDF</h4> <ol start="37"><li><h5 id="description-description-19"><a href="#description-description-19" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Regenerate missing Duplicate PDF bills</p> <h5 id="process-process-19"><a href="#process-process-19" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.single.SinglePhoneDupPdfTask</p> <p>mission details:</p> <ol start="3"><li><p>Query the data of STEP equal to 1 and 3 in the am_single_phone_yyyy table</p></li> <li><p>Complete the information of the three households, delete the data of the original table and regenerate AM_BQA_12, AM_BQS_12,</p> <p>AM_MAIL_MAIN_201912, AM_MAIL_MAIN_AUX_201912, AM_MAIL_MAIN_LOG_2019, AC1.AM_DMAIL_LOG_2019, regenerate duplicate pdf bill file, and modify the status of AM_SINGLE_PHONE, execution results and execution time.</p> <ol start="24"><li><h4 id="clean-email-log"><a href="#clean-email-log" class="header-anchor">#</a> Clean email_log</h4> <ol start="39"><li><h5 id="description-description-20"><a href="#description-description-20" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clean up the bill = am_email_log_ log and am_single_phone_yyyy table step = 4 data</p> <h5 id="process-process-20"><a href="#process-process-20" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncatePerNumberPdfTask</p> <p>mission details:</p> <p>Clean up the bill = am_email_log_ log and am_single_phone_yyyy table step = 4 data</p> <ol start="25"><li><h4 id="gen-ebill-pdf"><a href="#gen-ebill-pdf" class="header-anchor">#</a> Gen Ebill Pdf</h4> <ol start="41"><li><h5 id="description-description-21"><a href="#description-description-21" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Generate Ebill PDF, generate log log</p> <h5 id="process-process-21"><a href="#process-process-21" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.pdf.SendEmailEbillTask</p> <p>mission details:</p> <ol><li><p>Get the queried data from AM_MAIL_MAIN_YYYYMM, traverse the data for processing</p></li> <li><p>Check mailing information, external fees, free resources, payment statistics, detailed bill information</p></li> <li><p>Use the main package to determine which bill to generate (GMS, PRI, FIX_LINE)</p></li> <li><p>The generated bill file is distributed according to the account modulo in the/data01/acttask/data/postBill/201912/PDF directory of the 4 hosts</p></li> <li><p>If there is data, there is a bill. According to whether the third digit of POS_MODE is 1, it is judged whether to generate a detailed bill.</p> <ol start="26"><li><h4 id="collect-and-send-ebill"><a href="#collect-and-send-ebill" class="header-anchor">#</a> Collect And Send Ebill</h4> <ol start="43"><li><h5 id="description-description-22"><a href="#description-description-22" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Merge Ebill bills and send email</p> <h5 id="process-process-22"><a href="#process-process-22" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.collect.CollectAndSendEbillTask</p> <p>mission details:</p> <ol><li><p>Traverse the bill file directory, obtain the mobile phone number according to the file name, and then query the corresponding mailing information</p></li> <li><p>According to the inquired information, stitch the contents of the email, insert the email list first, and then move the bill file to/data01/acttask/data/postBill_FINAL/201912/PDF</p> <ol start="27"><li><h4 id="check-ebill-pdf-file"><a href="#check-ebill-pdf-file" class="header-anchor">#</a> Check Ebill Pdf file</h4> <ol start="45"><li><h5 id="description-description-23"><a href="#description-description-23" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Check that the number of the Ebill PDF bill not generated is recorded in the am_single_phone_yyyy table step = 4</p> <h5 id="process-process-23"><a href="#process-process-23" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.checkdata.CheckEbillPdfTask</p> <p>mission details:</p> <ol><li><p>Calculate the number of AM_MAIL_MAIN_AUX and the number of successful users in the am_email_log_YYYY table. If they are equal, it means that no additional data is required. If they are not equal, if the number of differences is equal to the number of errors in the month of the am_email_log_YYYY table, then make up the data through this error log. Not equal, the data is supplemented by the difference data of the two tables. The am_email_log_YYYY table uses the data of the statistical library. The data that needs to be supplemented is placed in the am_single_phone_yyyy table and STEP = 4</p></li> <li><p>Send the statistical results to relevant personnel by SMS.</p> <ol start="28"><li><h4 id="regenerate-ebill"><a href="#regenerate-ebill" class="header-anchor">#</a> Regenerate Ebill</h4> <ol start="47"><li><h5 id="description-description-24"><a href="#description-description-24" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Regenerate missing Ebill PDF bills</p> <h5 id="process-process-24"><a href="#process-process-24" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.single.SinglePhoneEbillPdfBillTask</p> <p>mission details:</p> <ol><li><p>Query the data of STEP equal to 1 and 4 in the am_single_phone_yyyy table</p></li> <li><p>Complete the information of the three households, delete the data of the original table and regenerate AM_BQA_12, AM_BQS_12,</p> <p>AM_MAIL_MAIN_201912, AM_MAIL_MAIN_AUX_201912, AM_MAIL_MAIN_LOG_2019, AC1.AM_EMAIL_LOG_2019, regenerate ebill pdf bill file, and modify the status of AM_SINGLE_PHONE, execution results and execution time.</p> <ol start="29"><li><h4 id="clean-ntn-log-am-vpn-summary"><a href="#clean-ntn-log-am-vpn-summary" class="header-anchor">#</a> Clean NTN_LOG &amp; AM_VPN_SUMMARY</h4> <ol start="49"><li><h5 id="description-description-25"><a href="#description-description-25" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Clean up NTN_LOG and AM_VPN_SUMMARY, AM_SINGLE_GROUP_YYYY</p> <h5 id="process-process-25"><a href="#process-process-25" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.truncatetable.TruncateNTNLogTask</p> <p>mission details:</p> <p>Clean up NTN_LOG and AM_VPN_SUMMARY, AM_SINGLE_GROUP_YYYY</p> <ol start="30"><li><h4 id="gen-ntn-pdf"><a href="#gen-ntn-pdf" class="header-anchor">#</a> Gen NTN PDF</h4> <ol start="51"><li><h5 id="description-description-26"><a href="#description-description-26" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Generate NTN_ID PDF, generate log log</p> <h5 id="process-process-26"><a href="#process-process-26" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.pdf.NtnEmailTask ​​-pGROUP_TYPE = NTN</p> <p>mission details:</p> <ol><li><p>Find out the valid data within this month from the group information table, traverse the data for processing</p></li> <li><p>Query whether the current NTN_ID in the AM_VPN_BILL_YYYYMM table has more than 2 pieces of data.</p></li> <li><p>Query the sensitive user table. If there are numbers in it, two bills will be generated, one containing sensitive numbers and one not containing sensitive numbers, otherwise only one PDF file will be generated and the log will be recorded in the AM_NTN_MAIL_LOG_YYYY table ntn_flag = 1</p></li> <li><p>The generated files are placed in the/data02/acttask/data/postBill/201912/GROUP/NTN directory</p> <ol start="31"><li><h4 id="gen-dept-pdf"><a href="#gen-dept-pdf" class="header-anchor">#</a> Gen Dept PDF</h4> <ol start="53"><li><h5 id="description-description-27"><a href="#description-description-27" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Generate DEPT PDF, generate log log</p> <h5 id="process-process-27"><a href="#process-process-27" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.pdf.NtnEmailTask ​​-pGROUP_TYPE = DEPT</p> <p>mission details:</p> <ol><li><p>Find out the valid data within this month from the group information table, traverse the data for processing</p></li> <li><p>Query whether the current DEPT_ID in the AM_VPN_BILL_DTL_YYYYMM table has data, and only if there is data, the bill will be produced</p></li> <li><p>Query the sensitive user table. If there are numbers in it, two bills will be generated, one containing sensitive numbers and one not containing sensitive numbers, otherwise only one PDF file will be generated and the log will be recorded in the AM_NTN_MAIL_LOG_YYYY table</p></li> <li><p>The generated files are placed in the/data02/acttask/data/postBill/201912/GROUP/DEPT directory</p> <ol start="32"><li><h4 id="gen-cust-name-pdf"><a href="#gen-cust-name-pdf" class="header-anchor">#</a> Gen Cust Name PDF</h4> <ol start="55"><li><h5 id="description-description-28"><a href="#description-description-28" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Generate CUSTNAME PDF, generate log log</p> <h5 id="process-process-28"><a href="#process-process-28" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.pdf.NtnEmailTask</p> <p>-pGROUP_TYPE = CUSTNAME</p> <p>mission details:</p> <ol><li><p>Query AM_VPN_BILL_YYYYMM table cust_name records with more than 2 data to traverse</p></li> <li><p>Query the sensitive user table, if there are numbers in it, two bills will be generated, one containing sensitive numbers and one not containing sensitive numbers, otherwise only one PDF file will be generated</p></li> <li><p>The generated files are placed in the/data02/acttask/data/postBill/201912/GROUP/CUST_NAME directory</p> <ol start="33"><li><h4 id="collect-ntn-pdf"><a href="#collect-ntn-pdf" class="header-anchor">#</a> Collect NTN PDF</h4> <ol start="57"><li><h5 id="description-description-29"><a href="#description-description-29" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Collect group bills to 16 hosts</p> <h5 id="process-process-29"><a href="#process-process-29" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.collect.CollectNTNTask</p> <p>mission details:</p> <p>Traverse the bill file directory and send the group bill file to the 16 host/data02/acttask/data/postBill_FINAL /</p> <p>In the directory of 201912/GROUP, the billing files of other hosts will be backed up to the/data02/acttask/data/postBill_FINAL/201912/GROUP, the billing files of 16 hosts will be from/data02/acttask/data/postBill/201912/GROUP Directory mv to/data02/acttask/data /</p> <p>Under the postBill_FINAL/201912/GROUP directory, there is only one bill generated by all 16 hosts, and there are 2 bills generated by other hosts</p> <ol start="34"><li><h4 id="check-ntn-bill-data"><a href="#check-ntn-bill-data" class="header-anchor">#</a> Check NTN Bill Data</h4> <ol start="59"><li><h5 id="description-description-30"><a href="#description-description-30" class="header-anchor">#</a> description-description</h5></li></ol></li></ol> <p>Check AM_VPN_DTL_YYYYMM table to see if there is any missing AM_BILL_AR data check, generate am_single_phone_yyyy step = 5</p> <h5 id="process-process-30"><a href="#process-process-30" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.checkdata.CheckVPNDataTask</p> <p>mission details:</p> <ol><li><p>Calculate the number of users in the AM_VPN_BILL_DTL_YYYYMM and AM_BILL_AR tables. If they are equal, it means that no additional data is required. If they are not equal, if the number of differences is equal to the number of the AM_VPN_BILL_LOG_2019 table in the current month, the error log records the supplementary data. Then the data is supplemented by the difference data of the two tables, and the AM_BILL_AR table uses the data of the statistical library. The data that needs to be generated is placed in the am_single_phone_yyyy table, and STEP = 5</p></li> <li><p>Send the statistical results to relevant personnel by SMS.</p> <ol start="35"><li><h4 id="check-ntn-pdf"><a href="#check-ntn-pdf" class="header-anchor">#</a> Check NTN PDF</h4> <ol start="61"><li><h5 id="description-description-31"><a href="#description-description-31" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Check the log log and AM_VPN_DTL_YYYYMM ratio is missing, generate am_single_group_yyyy</p> <h5 id="process-process-31"><a href="#process-process-31" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.checkdata.CheckVPNPDFTask</p> <p>mission details:</p> <ol><li><p>Calculate AM_VPN_BILL_YYYY according to NTN_ID group by the number of NTN_IDs greater than 2 and the number of successful users in the am_ntn_mail_log_YYYY table ntn_flag = 1. If they are equal, it means that no additional data is needed. If they are not equal, if the number of differences is equal to am_ntn_mail_log_YYYY table ntn_flag = 1 month of the month When the number of errors is correct, the data is supplemented through this error log. If they are not equal, the data is supplemented through the difference data of the two tables. The data that needs to be supplemented is placed in the am_single_group_yyyy table, ntn_flag = 1</p></li> <li><p>Calculate the number of AM_VPN_BILL_DTL_YYYY according to the DEPT_ID group by DEPT_ID number and the number of successful users in the am_ntn_mail_log_YYYY table ntn_flag = 2. If they are equal, it means that no additional data is needed. , Then make up the data through this error log, if it is not equal, then make up the data through the difference data of the two tables. The data needed to make up is put in the am_single_group_yyyy table, ntn_flag = 2</p></li> <li><p>Calculate the number of AM_VPN_BILL_YYYY CUST_NAME group by the number of CUST_NAME greater than 2 and the number of successful users in the am_ntn_mail_log_YYYY table ntn_flag = 3. If they are equal, it means that no additional data is needed. If they are not equal, if the number of differences is equal to am_ntn_mail_log_YYYY table ntn_flag = 3 month When the number of errors is, the data is supplemented through this error log. If they are not equal, the data is supplemented through the difference data of the two tables. The data that needs to be supplemented is placed in the am_single_group_yyyy table, ntn_flag = 3</p></li> <li><p>Send the statistical results to relevant personnel by SMS.</p> <ol start="36"><li><h4 id="regenerate-ntn-data"><a href="#regenerate-ntn-data" class="header-anchor">#</a> Regenerate NTN Data</h4> <ol start="63"><li><h5 id="description-description-32"><a href="#description-description-32" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Regenerate missing group data</p> <h5 id="process-process-32"><a href="#process-process-32" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.single.SingleVpnDataTask</p> <p>mission details:</p> <ol start="3"><li><p>Query the data of STEP equal to 5 in the am_single_phone_yyyy table</p></li> <li><p>Complete the information of the three households, delete the data of the original table and regenerate AM_BQA_12, AM_BQS_12,</p> <p>AM_VPN_BILL_201912, AM_VPN_BILL_DTL_201912, AM_VPN_BILL_LOG_2019, if it is an NTN number, you need to determine whether there is this type of NTN data in the AM_SINGLE_GROUP table, if there is, update it, if not, insert it, and modify the state of AM_SINGLE_PHONE, execution result and execution time.</p> <ol start="37"><li><h4 id="regenerate-ntn-pdf-file"><a href="#regenerate-ntn-pdf-file" class="header-anchor">#</a> Regenerate NTN PDF file</h4> <ol start="65"><li><h5 id="description-description-33"><a href="#description-description-33" class="header-anchor">#</a> description-description</h5></li></ol></li></ol></li></ol> <p>Regenerate missing group PDF</p> <h5 id="process-process-33"><a href="#process-process-33" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.single.SingleVpnPdfTask</p> <p>mission details:</p> <ol><li><p>Query the data in the am_single_group_yyyy table</p></li> <li><p>Call different processing classes for processing according to the NTN_FLAG type, generate the corresponding PDF, and modify the state, execution result, and execution time of AM_SINGLE_PHONE.</p></li> <li><h4 id="resend-email-bill"><a href="#resend-email-bill" class="header-anchor">#</a> Resend Email Bill</h4></li> <li><h5 id="description-description-34"><a href="#description-description-34" class="header-anchor">#</a> description-description</h5></li></ol> <p>Reissue bill generation</p> <h5 id="process-process-34"><a href="#process-process-34" class="header-anchor">#</a> process-process</h5> <p>Corresponding code entry class: com.ai.ac.core.bill.task.single.SingleResendEmailTask</p> <p>mission details:</p> <ol><li><p>The customer applies for bill reissue through the front desk interface, and enters the bill repeat data into the am_single_phone_yyyy table</p></li> <li><p>The background task queries the data of STEP equal to 6 in the am_single_phone_yyyy table</p></li> <li><p>Complete the information of the three households, delete the data of the original table according to AM_MAIL_MAIN_201912,</p> <p>AM_MAIL_MAIN_AUX_201912 table regenerate AC1.AM_EMAIL_LOG_2019, regenerate ebill pdf bill file, and modify the status of AM_SINGLE_PHONE, execution result and execution time, bill file is generated to/data02/acttask/data/postBill/201912/RESEND</p></li> <li><p>Collect/data02/acttask/data/postBill/201912/RESEND bill to/data02/acttask/data</p> <p>/postBill_FINAL/201912/PDF directory, and insert it into the mailing table. After successful, modify the re-bill data information.</p></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="http://8.208.26.203:18082/cmpak/acctmanm/edit/develop/doc/en/assetcenter/后台设计文档.md" target="_blank" rel="noopener noreferrer">Edit this page on Gogs</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/acct-doc/en/assetcenter/前台设计文档.html" class="prev">
        FrontDesk Design Document
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/acct-doc/assets/js/app.63ad57cc.js" defer></script><script src="/acct-doc/assets/js/2.33beb707.js" defer></script><script src="/acct-doc/assets/js/21.b3600cfd.js" defer></script>
  </body>
</html>
